<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2998"/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%;position: relative;"><div style="outline:0px;box-sizing:border-box;"><div style="box-sizing:inherit;outline:0px;background:url(https://csdnimg.cn/release/phoenix/themes/skin-yellow/images/bg.png) repeat;font-family:&quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:14px;line-height:1.57143;color:rgb(51, 51, 51);background-color:rgb(245, 246, 247);"><div style="outline:0px;box-sizing:border-box;"><span style="box-sizing:inherit;outline:0px;"><div style="box-sizing:inherit;outline:0px;background:rgb(255, 255, 255);box-shadow:rgba(0, 0, 0, 0.05) 0px 2px 4px 0px;">
	<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;margin-bottom:16px;">
			<span style="border-radius:50%;display:inline-block;width:26px;height:26px;line-height:26px;text-align:center;font-size:12px;outline:0px;box-sizing:inherit;border:1px solid rgb(244, 206, 208);color:rgb(202, 12, 22);margin-right:8px;margin-top:4px;float:left;">原</span>		<h1 style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;font-size:24px;word-break:break-all;">Nginx-------Nginx的安装和多域名配置</h1>
	</div>
	<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;padding-bottom:14px;border-bottom:1px solid rgb(227, 227, 227);">
		<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;color:rgb(133, 133, 133);display:flex;">
												<span style="box-sizing:inherit;outline:0px;margin-right:14px;">2017年04月11日 13:54:14</span>
			<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;margin-left:auto;float:right;">
				<span style="box-sizing:inherit;outline:0px;margin-right:14px;">阅读数：28560</span>
											</div>
		</div>
	</div>
	<div style="box-sizing:inherit;outline:0px;display:block;position:relative;padding-top:16px;">
		<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;word-break:break-all;">
                    
						<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;font-family:-apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif, SimHei, SimSun;word-break:break-all;">
                <p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></p><h1 style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:28px;color:rgb(79, 79, 79);font-weight:700;line-height:36px;word-break:break-all;"><a name="t0" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a><span style="outline:0px;box-sizing:border-box;word-break:break-all;color:#ff6600;">Nginx安装</span></h1><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">centos6.x yum默认没有nginx的软件包 <br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>安装方式： <br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>到nginx下载页面<a href="http://nginx.org/en/linux_packages.html#stable" rel="nofollow" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;" target="_blank">http://nginx.org/en/linux_packages.html#stable</a>，复制CENTOS 6的nginx软件源安装包 <br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>运行命令：wget <a href="http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm" rel="nofollow" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;" target="_blank">http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm</a> <br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>安装rpm包 yum install nginx-release-centos-6-0.el6.ngx.noarch.rpm -y ， 此步实际只是加入了nginx的软件包源 <br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>执行 yum install nginx -y 就可以安装好nginx了。</span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">nginx默认安装为Linux的服务 ,所以可以使用service nginx start, stop, restart, try-restart, reload, force-reload, status来操作nginx。</span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"></p><h1 style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:28px;color:rgb(79, 79, 79);font-weight:700;line-height:36px;word-break:break-all;"><a name="t1" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a><span style="outline:0px;box-sizing:border-box;word-break:break-all;color:#ff6600;">Nginx配置文件</span></h1><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">nginx的配置文件默认读取/etc/nginx/nginx.conf文件。</span></p><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">当然也可以修改使用的conf路径，使用命令:<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>./nginx -c 你的conf文件位置<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>可以相对路径或者绝对路径。<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>如果是不熟悉环境的Linux服务器，可以使用命令来快速查找nginx.conf文件 :<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>sudo  find  / -name &quot;nginx.conf&quot;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>也可以使用命令<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>sudo nginx -t <br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>来输出正在使用的配置文件:<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>nginx: the configuration file /data/nginx/conf/nginx.conf syntax is ok<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>nginx: configuration file /data/nginx/conf/nginx.conf test is successful<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>nginx的配置都是由 directives组成，directives由简单指令或者区块指令组成 <br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>简单指令：listen 80; <br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>区块指令由｛｝包含，区块指令又可以包含多个简单指令和区块指令：<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>http {<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    server {<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    }<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>}<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></p><h1 style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:28px;color:rgb(79, 79, 79);font-weight:700;word-break:break-all;line-height:35px;"><a name="t2" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a><span style="outline:0px;box-sizing:border-box;word-break:break-all;color:#ff6600;">多域名配置</span></h1><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">我们都知道如果在域名管理的控制面板设置域名对应ip只能设置到ip，不能详细设置到端口。如果一台服务器部署了多个web应用，使用的不同端口启动的，那么就可以Nginx做映射。</span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">比如我有一个域名 www.525.life。</span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">域名还可以分出2级域名: admin.525.life。</span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">我在域名控制面板把这两个域名都指向我的服务器公网ip 123.123.123.123。</span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">这时候发现<span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">www.525.life和<span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">admin.525.life域名访问都只是对应到了 使用端口80的Web程序(默认的）。</span></span></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">如果我们要访问81端口的应用程序只能使用:</span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">www.525.life:81或者</span><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">admin.525.life:81。</span><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">但是这样很不方便。我们要把端口去掉也能访问就需要使用Nginx做映射。</span></span></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">我们期望<span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">www.525.life访问8880端口，<span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">admin.525.life访问8881端口。那么可以设置如下:</span></span></span></span></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">server<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>{<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    listen 80;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    server_name www.525.life;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    location / {<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        #....<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        proxy_pass http://localhost:8880;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    }<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    ##### other directive<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>}<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>server<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>{<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    listen 80;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    server_name admin.525.life;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    location / {<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        #....<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        proxy_pass http://localhost:8881;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    }<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    ##### other directive<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>}<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></span></span></span></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">这样设置就可以了。把8880和8881都映射到80端口的监听。</span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">使用重载命令使nginx生效:</span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">sudo nginx -s reload<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">使用命令重启nginx生效:</span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">/etc/init.d/nginx restart</span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">这样就能使用<span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">www.525.life访问8880端口，</span><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">admin.525.life访问8881端口。</span></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></p><h1 style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:28px;color:rgb(79, 79, 79);font-weight:700;word-break:break-all;line-height:35px;"><a name="t3" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a><span style="outline:0px;box-sizing:border-box;word-break:break-all;color:#ff6600;">每个域名一个conf的写法</span></h1><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">我们在上面的例子中使用的是一个文件多个域名的写法，也就是只使用一个conf，在里面不断的增加server。这种方式很直观，但是域名多了不好管理。<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>Nginx支持引入的用法，也就是我们可以在其他地方先新建好conf文件，conf文件中记录server的信息如下:<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>admin.conf中的内容是:<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>server<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>{<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    listen 80;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    server_name admin.525.life;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    location / {<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        #....<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        proxy_pass http://localhost:8881;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    }<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    ##### other directive<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>}<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>www.conf中的内容是:<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>server<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>{<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    listen 80;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    server_name www.525.life;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    location / {<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        #....<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        proxy_pass http://localhost:8880;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    }<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    ##### other directive<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>}<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>admin.conf和www.conf都放在/data/nginx/conf/vhost目录下。<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>然后在nginx.conf中使用引入命令:<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>include             /data/nginx/conf/vhost/*.conf;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>即可。<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>需要注意的是这句命令应该放在<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>http{<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>}<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>的花括号内。<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>因为include的命令引入相当于被引入的所有代码写在nginx.conf中一样。<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;line-height:20.8px;"></span></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"></p><h1 style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:28px;color:rgb(79, 79, 79);font-weight:700;word-break:break-all;line-height:35px;"><a name="t4" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a><span style="outline:0px;box-sizing:border-box;word-break:break-all;color:#ff6600;">301跳转</span></h1><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;line-height:20.8px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"></span></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;">我们留意到生活中很多时候不带www也能访问到某个网站，这也能通过Nginx实现。跟上面的配置一样，再增加一个server如下:</p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;">server<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>{<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    listen 80;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    server_name  525.life;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    location / {<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        #....<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>        proxy_pass http://localhost:8880;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    }<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    ##### other directive<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>}<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;">或者进行301跳转</p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;">server<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>{<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    listen 80;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    server_name 525.life;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>    rewrite ^/(.*) http://www.525.life/$1 permanent;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>}</p><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"></p><h1 style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:28px;color:rgb(79, 79, 79);font-weight:700;line-height:36px;word-break:break-all;"><a name="t5" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a><span style="outline:0px;box-sizing:border-box;word-break:break-all;color:#ff6600;">添加404网页</span></h1><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;">添加404网页，都可又直接在里面添加，如：<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>server<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>{<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>listen 80;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>server_name www.web126.com; #绑定域名<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>error_page 404 /404.html;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>} <br style="outline:0px;box-sizing:border-box;word-break:break-all;"/><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span><h1 style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:28px;color:rgb(79, 79, 79);font-weight:700;line-height:36px;word-break:break-all;"><a name="t6" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a><span style="outline:0px;box-sizing:border-box;word-break:break-all;color:#ff6600;">禁止IP直接访问</span></h1><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"></span><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></p>最后还有一个方法需要注意，可能有需要禁止IP直接访问80端口或者禁止非本站的域名绑定我们的IP，这样的话应该<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>如下处理，放到最前一个server上面即可：<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>server{<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>listen 80 default;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>server_name _;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>return 403;<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>}<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;word-break:break-all;line-height:35px;text-align:justify;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></p><p style="outline:0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></p>            </div>
                <span style="display:block;clear:both;"></span></div>
				
        	</div>
	
<a style="box-sizing:inherit;outline:0px;color:rgb(51, 51, 51);text-decoration:none;cursor:pointer;"></a>
<div style="box-sizing:inherit;outline:0px;position:relative;padding:8px;background:rgb(255, 255, 255);border:1px solid rgb(224, 224, 224);border-radius:4px;margin:16px auto 0px;width:817px;display:flex;">
  <div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;padding-right:16px;margin-right:16px;border-right:1px solid rgb(224, 224, 224);font-size:12px;">
    <img src="nginx_files/4697ab40-4f6b-11e8-bcf5-914d9a6bdd86" type="image/jpeg" data-filename="4697ab40-4f6b-11e8-bcf5-914d9a6bdd86" height="130" style="box-sizing:inherit;outline:0px;display:block;width:130px;height:130px;" width="130"/>
    <p style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;margin-top:4px;color:rgb(153, 153, 153);text-align:center;">扫码向博主提问</p>
  </div>

      <a href="https://mp.csdn.net/ask" style="display:inline-block;margin-bottom:6px;margin-top:6px;min-width:72px;box-sizing:inherit;outline:0px;text-decoration:none;cursor:pointer;margin:6px 8px;padding:0px 8px;line-height:28px;font-size:14px;border-radius:4px;text-align:center;border:none;background-color:transparent;height:30px;top:8px;right:8px;position:absolute;color:rgb(121, 165, 229);" target="_blank">去开通我的Chat快问</a>
    
  <div style="display:flex;width:100%;outline:0px;padding:0px;margin:0px;box-sizing:inherit;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;">
    <div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;display:flex;">
      <img src="nginx_files/3_q383965374.jpg" type="image/png" data-filename="3_q383965374.jpg" height="32" style="box-sizing:inherit;outline:0px;width:32px;height:32px;border-radius:50%;" width="32"/>
      <p style="outline:0px;margin-left:8px;color:rgb(61, 61, 61);font-weight:500;box-sizing:inherit;margin-right:24px;padding:0px;margin:0px;display:flex;-webkit-box-align:center;align-items:center;">张小凡vip</p>
            <p style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;color:rgb(219, 157, 52);display:flex;-webkit-box-align:center;align-items:center;">
          <span style="box-sizing:inherit;outline:0px;width:1em;height:1em;vertical-align:-0.15em;fill:currentcolor;overflow:hidden;transition:transform 0.1s ease-in-out, fill 0.1s ease-in-out, -webkit-transform 0.1s ease-in-out;font-size:20px;margin-right:4px;">
              <span style="box-sizing:inherit;outline:0px;"></span>
          </span>
          博客专家
      </p>
          </div>
    <div style="box-sizing:inherit;outline:0px;padding:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin:8px 0px;color:rgb(77, 77, 77);">
      学习最好的方式是分享•ᴗ•    </div>
      </div>
</div>

		<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;padding-bottom:16px;margin-top:16px;border-bottom:1px solid rgb(227, 227, 227);">
				<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;font-size:12px;color:rgb(153, 153, 153);">
			版权声明：本文为博主原创文章，未经博主允许不得转载。			https://blog.csdn.net/q383965374/article/details/70049348		</div>
						<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;margin-bottom:8px;font-size:12px;margin-top:8px;">
			<span style="box-sizing:inherit;outline:0px;color:rgb(77, 77, 77);">文章标签：</span>
						<a href="http://so.csdn.net/so/search/s.do?q=nginx&amp;t=blog" style="color:rgb(77, 77, 77);cursor:pointer;text-decoration:none;outline:0px;box-sizing:inherit;display:inline-block;word-break:break-all;border:1px solid rgb(204, 204, 204);border-radius:100px;padding:0px 8px;text-align:center;line-height:24px;min-width:24px;height:24px;margin-right:8px;" target="_blank">nginx						</a><a href="http://so.csdn.net/so/search/s.do?q=%E5%9F%9F%E5%90%8D&amp;t=blog" style="color:rgb(77, 77, 77);cursor:pointer;text-decoration:none;outline:0px;box-sizing:inherit;display:inline-block;word-break:break-all;border:1px solid rgb(204, 204, 204);border-radius:100px;padding:0px 8px;text-align:center;line-height:24px;min-width:24px;height:24px;margin-right:8px;" target="_blank">域名						</a><a href="http://so.csdn.net/so/search/s.do?q=%E5%A4%9A%E4%B8%AA&amp;t=blog" style="color:rgb(77, 77, 77);cursor:pointer;text-decoration:none;outline:0px;box-sizing:inherit;display:inline-block;word-break:break-all;border:1px solid rgb(204, 204, 204);border-radius:100px;padding:0px 8px;text-align:center;line-height:24px;min-width:24px;height:24px;margin-right:8px;" target="_blank">多个						</a><a href="http://so.csdn.net/so/search/s.do?q=%E7%AB%AF%E5%8F%A3&amp;t=blog" style="color:rgb(77, 77, 77);cursor:pointer;text-decoration:none;outline:0px;box-sizing:inherit;display:inline-block;word-break:break-all;border:1px solid rgb(204, 204, 204);border-radius:100px;padding:0px 8px;text-align:center;line-height:24px;min-width:24px;height:24px;margin-right:8px;" target="_blank">端口						</a><a href="http://so.csdn.net/so/search/s.do?q=ip&amp;t=blog" style="color:rgb(77, 77, 77);cursor:pointer;text-decoration:none;outline:0px;box-sizing:inherit;display:inline-block;word-break:break-all;border:1px solid rgb(204, 204, 204);border-radius:100px;padding:0px 8px;text-align:center;line-height:24px;min-width:24px;height:24px;margin-right:8px;" target="_blank">ip						</a>
		</div>
						<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;font-size:12px;margin-bottom:0px;">
			<span style="box-sizing:inherit;outline:0px;color:rgb(77, 77, 77);">个人分类：</span>
						<a href="https://blog.csdn.net/q383965374/article/category/3170357" style="box-sizing:inherit;outline:0px;text-decoration:none;cursor:pointer;display:inline-block;margin-right:24px;color:rgb(121, 165, 229);word-break:break-all;" target="_blank">nginx						</a><a href="https://blog.csdn.net/q383965374/article/category/1407216" style="box-sizing:inherit;outline:0px;text-decoration:none;cursor:pointer;display:inline-block;margin-right:24px;color:rgb(121, 165, 229);word-break:break-all;" target="_blank">web						</a>
		</div>
							</div>
	
	
			<div style="outline:0px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;margin:0px;box-sizing:inherit;padding:0px;line-height:28px;display:inline-block;width:48%;margin-top:18px;margin-right:16px;">
		<a href="https://blog.csdn.net/zzq900503/article/details/69942930" style="box-sizing:inherit;outline:0px;color:rgb(51, 51, 51);text-decoration:none;cursor:pointer;">
			<span style="box-sizing:inherit;outline:0px;margin-right:8px;padding:6px 8px;font-size:12px;border:1px solid rgb(227, 227, 227);color:rgb(77, 77, 77);">上一篇</span>JS----checked----checked选中和未选中的获取		</a>
	</div>
				<div style="outline:0px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;margin:0px;box-sizing:inherit;padding:0px;line-height:28px;display:inline-block;width:48%;margin-bottom:0px;margin-top:0px;">
		<a href="https://blog.csdn.net/zzq900503/article/details/70054379" style="box-sizing:inherit;outline:0px;color:rgb(51, 51, 51);text-decoration:none;cursor:pointer;">
			<span style="box-sizing:inherit;outline:0px;margin-right:8px;padding:6px 8px;font-size:12px;border:1px solid rgb(227, 227, 227);color:rgb(77, 77, 77);">下一篇</span>遇到问题-----web-----uploadify上传工具的坑----清除浏览器缓存后初始化失败不报错--uploadify初始化失效		</a>
	</div>
	</div></span></div></div></div></div>
</div>
</span>
</div></body></html> 