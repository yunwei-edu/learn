<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="731"/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div><div style="font-family:'PingFang SC', 'Helvetica Neue', Helvetica, Arial, sans-serif;color:rgb(0, 0, 0);background:rgb(255, 255, 255);font-size:14px;"><div style="min-width:initial;"><div style="min-width:initial;text-align:left;"><div style="text-overflow:ellipsis;overflow:hidden;word-break:break-all;"><div><div><div style="text-overflow:ellipsis;overflow:hidden;word-break:break-all;"><div><div style="line-height:1.5;color:rgb(0, 0, 0);"><div style="word-break:break-word;"><h1 style="padding:0px;font-size:28px;font-weight:bold;line-height:1.5;margin:10px 0px;"><span style="margin:0px;padding:0px;font-size:14px;line-height:1.5;">[ref: </span><a href="http://blog.51yip.com/server/1382.html" style="margin:0px;padding:0px;color:black;text-decoration:underline;font-size:14px;line-height:1.5;" target="_blank">http://blog.51yip.com/server/1382.html</a><span style="margin:0px;padding:0px;font-size:14px;line-height:1.5;">]</span></h1>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><span style="margin:0px;padding:0px;font-size:14px;line-height:1.5;">[<a href="http://blog.chinaunix.net/uid-174325-id-1744019.html" style="margin:0px;padding:0px;color:black;text-decoration:underline;" target="_blank">http://blog.chinaunix.net/uid-174325-id-1744019.html</a>]</span></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><span style="margin:0px;padding:0px;font-size:14px;line-height:1.5;">[<a href="http://mba.shengwushibie.com/itbook/BookChapter.asp?id=4959" style="margin:0px;padding:0px;color:black;text-decoration:underline;" target="_blank">http://mba.shengwushibie.com/itbook/BookChapter.asp?id=4959</a>]</span></p>
<div style="margin:0px;padding:0px;">
<p style="padding:0px;margin:10px auto;text-indent:0px;">DNS服务器服务器自己可以不用搭，用第三方的就可以了。访问大也没有什么问题，我现在做游戏这一块，游戏要推广的，推广的时候一天的独立IP就可以达到700W左右。我用了dnspod的企业版，一年600块钱不到。邮件服务器，最好还是自己搭，用别人的邮件的服务器，会受到限制的。发到多少封就不给发了，这就挺郁闷的了。下面简单介绍一下在centos6 64位机器上搭建postfix邮件服务器。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"> </p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">一，安装postfix，cyrus-sasl，cyrus-imapd</strong></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">如果yum提示找不到软件包，请换一下源，请参考<strong style="margin:0px;padding:0px;"><a href="http://blog.51yip.com/linux/1337.html" style="margin:0px;padding:0px;color:black;text-decoration:underline;" title="centos 6推荐使用epel源">centos 6推荐使用epel源</a></strong></p>
<div style="padding:0px;font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;overflow:auto;word-break:break-word;margin:18px 0px;"><ol start="1" style="border:none;list-style:decimal;color:rgb(92, 92, 92);background-color:rgb(255, 255, 255);padding-left:40px;margin:0px 0px 1px 45px;padding:0px;">
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@localhost ~]# yum install postfix  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@localhost ~]# yum install cyrus*  </li>
</ol></div>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">二，删除了sendmail</strong></p>
<div style="padding:0px;font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;overflow:auto;word-break:break-word;margin:18px 0px;"><ol start="1" style="border:none;list-style:decimal;color:rgb(92, 92, 92);background-color:rgb(255, 255, 255);padding-left:40px;margin:0px 0px 1px 45px;padding:0px;">
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@localhost ~]# rpm -e sendmail  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">或者  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@localhost ~]# yum remove sendmail  </li>
</ol></div>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">三，更改默认邮件传输代理（MTA）</strong></p>
<div style="padding:0px;font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;overflow:auto;word-break:break-word;margin:18px 0px;"><ol start="1" style="border:none;list-style:decimal;color:rgb(92, 92, 92);background-color:rgb(255, 255, 255);padding-left:40px;margin:0px 0px 1px 45px;padding:0px;">
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@localhost sasl2]# alternatives --config mta  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">共有 1 个程序提供“mta”。  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">  选择    命令  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">-----------------------------------------------  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">*+ 1           /usr/sbin/sendmail.postfix  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">按 Enter 来保存当前选择[+]，或键入选择号码：1  </li>
</ol></div>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">上面的只有一个postfix，sendmail已经被我删了。可以通过下面命令来查看。</strong></p>
<div style="padding:0px;font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;overflow:auto;word-break:break-word;margin:18px 0px;"><ol start="1" style="border:none;list-style:decimal;color:rgb(92, 92, 92);background-color:rgb(255, 255, 255);padding-left:40px;margin:0px 0px 1px 45px;padding:0px;">
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@localhost ~]# alternatives --display mta  </li>
</ol></div>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">四，postfix，cyrus-sasl，cyrus-imapd相关配置</strong></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">1,postfix主配置文件main.cf</strong></p>
<div style="padding:0px;font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;overflow:auto;word-break:break-word;margin:18px 0px;">

<ol start="1" style="border:none;list-style:decimal;color:rgb(92, 92, 92);background-color:rgb(255, 255, 255);padding-left:40px;margin:0px 0px 1px 45px;padding:0px;">
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@localhost postfix]# vim /etc/postfix/main.cf  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">myhostname = localhost  <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//76行，将等号后面的部分改写为本机主机名  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">mydomain = 51yip.com   <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//82行，设置域名  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">myorigin = <span style="margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">$mydomain   <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//97行，把$myhostname改为$mydomain  </span></span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">inet_interfaces = all  <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//112行，把后面的localhost改成all  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">mydestination = <span style="margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">$myhostname, localhost.<span style="margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">$mydomain, localhost,<span style="margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">$mydomain <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//163行，把前面的注释拿掉，并加一下$mydomain  </span></span></span></span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">mynetworks = 192.168.0.0/24, 127.0.0.0/8  <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//263行，设置内网和本地IP  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">local_recipient_maps =  <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//209行，把前面的注释拿掉。  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">smtpd_banner = <span style="margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">$myhostname ESMTP unknow <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//568行，把前面的注释拿掉，然后把$mail_name ($mail_version)改成unknow  </span></span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"><span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//在main.cf文件的底部加上以下内容  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">smtpd_sasl_auth_enable = yes     <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//使用SMTP认证  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">broken_sasl_auth_clients = yes   <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//让不支持RFC2554的smtpclient也可以跟postfix做交互。  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">smtpd_sasl_local_domain = <span style="margin:0px;padding:0px;border:none;color:rgb(0, 0, 0);background-color:inherit;">$myhostname  <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">// 指定SMTP认证的本地域名  </span></span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">smtpd_sasl_security_options = noanonymous <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//取消匿名登陆方式  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">smtpd_recipient_restrictions = permit_mynetworks, permit_sasl_authenticated, reject_unauth_destination <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//设定邮件中有关收件人部分的限制  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">smtpd_sasl_security_restrictions = permit_mynetworks, permit_sasl_authenticated, reject_unauth_destination <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//设置允许范围  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">message_size_limit = 15728640     <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//邮件大小  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">mailbox_transport=lmtp:unix:/<span style="margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:bold;">var/lib/imap/socket/lmtp   <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//设置连接cyrus-imapd的路径  </span></span></li>
</ol></div>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">如果不加local_recipient_maps这个配置，收邮件收不到，下面是qq的退信。</strong></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">收件人邮件地址（tank@51yip.com）不存在，邮件无法送达。host mail.51yip.com[122.225.***.***] said: 550 5.1.1: Recipient address rejected: User unknown in local recipient table (in reply to RCPT TO command)</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">2,cyrus-sasl配置</strong></p>
<div style="padding:0px;font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;overflow:auto;word-break:break-word;margin:18px 0px;">

<ol start="1" style="border:none;list-style:decimal;color:rgb(92, 92, 92);background-color:rgb(255, 255, 255);padding-left:40px;margin:0px 0px 1px 45px;padding:0px;">
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@localhost postfix]# vim /etc/sasl2/smtpd.conf  <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//在文件尾部加上以下内容  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">log_level: 3     <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//记录log的模式  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">saslauthd_path:/<span style="margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:bold;">var/run/saslauthd/mux     <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//设置一下smtp寻找cyrus-sasl的路径  </span></span></li>
</ol></div>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">在这里要提一下的32位的机器和64位的机器smtpd.conf的路径是不一样的。</strong></p>
<div style="padding:0px;font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;overflow:auto;word-break:break-word;margin:18px 0px;">

<ol start="1" style="border:none;list-style:decimal;color:rgb(92, 92, 92);background-color:rgb(255, 255, 255);padding-left:40px;margin:0px 0px 1px 45px;padding:0px;">
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"><span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//这是centos 5.5 32位机器上smtpd的配置文件  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@linux sasl2]# ls |grep conf  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">Sendmail.conf  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">smtpd.conf  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@linux sasl2]# pwd  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">/usr/lib/sasl2  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"><span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//这是centos 6.0 64位机器上smtpd的配置文件,其他地方没有smtpd的配置文件  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@localhost postfix]# ls /etc/sasl2/ |grep smtpd  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">smtpd.conf  </li>
</ol></div>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">网上有不少关于postfix安装文章，配置的时候并没有明确提出是32位机器，还是64位机器。所以在这里标明一下。</strong></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">3,配置cyrus-imapd</strong></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">cyrus-imapd的主要配置文件有下面三个</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">/etc/sysconfig/cyrus-imapd</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">/etc/cyrus.conf</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">/etc/imapd.conf</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">这里是默认的配置，也就是说上面三个文件我是没有动过的。在这里提醒一下imapd.conf在这个文件里面，你可以设置管理账号</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">，设置邮件存放目录，设置密码连接方式等。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">五，启动postfix，cyrus-sasl，cyrus-imapd</strong></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">启动cyrus-imapd服务，就可以同时提供pop和imap服务，如果你已安装了dovecot服务就可以删除掉，cyrus-imapd和dovecot二者选其一就行了，二都可以提供pop和imap服务，不过cyrus-imapd可以为每个用户创建一个信息，而且信箱具有层次结构,比较好管理。建议用cyrus-imapd。</strong></p>
<div style="padding:0px;font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;overflow:auto;word-break:break-word;margin:18px 0px;">

<ol start="1" style="border:none;list-style:decimal;color:rgb(92, 92, 92);background-color:rgb(255, 255, 255);padding-left:40px;margin:0px 0px 1px 45px;padding:0px;">
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@linux sasl2]# /etc/init.d/postfix start  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@linux sasl2]# /etc/init.d/saslauthd start  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@linux sasl2]# /etc/init.d/cyrus-imapd start  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">查看一下进程，  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"><span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//smtp监听是25端口  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@linux u]# netstat -tpnl |grep smtpd  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">tcp        0      0 127.0.0.1:25                0.0.0.0:*                   LISTEN      6319/smtpd    </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"><span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//110(POP3)和143(IMAP)端口,下面都已经有了  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@linux u]# netstat -tpnl |grep cyrus  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">tcp        0      0 0.0.0.0:993                 0.0.0.0:*                   LISTEN      23593/cyrus-master  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">tcp        0      0 0.0.0.0:995                 0.0.0.0:*                   LISTEN      23593/cyrus-master  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">tcp        0      0 0.0.0.0:110                 0.0.0.0:*                   LISTEN      23593/cyrus-master  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">tcp        0      0 0.0.0.0:2000                0.0.0.0:*                   LISTEN      23593/cyrus-master  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">tcp        0      0 :::993                      :::*                        LISTEN      23593/cyrus-master  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">tcp        0      0 :::995                      :::*                        LISTEN      23593/cyrus-master  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">tcp        0      0 :::110                      :::*                        LISTEN      23593/cyrus-master  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">tcp        0      0 :::143                      :::*                        LISTEN      23593/cyrus-master  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">tcp        0      0 :::2000                     :::*                        LISTEN      23593/cyrus-master    </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">启动是没有问题的。  </li>
</ol></div>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">六，测试cyrus-sasl</strong></p>
<div style="padding:0px;font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;overflow:auto;word-break:break-word;margin:18px 0px;">

<ol start="1" style="border:none;list-style:decimal;color:rgb(92, 92, 92);background-color:rgb(255, 255, 255);padding-left:40px;margin:0px 0px 1px 45px;padding:0px;">
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@linux t]# passwd cyrus  <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//设置cyrus的密码  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@linux sasl2]# testsaslauthd -u cyrus -p <span style="margin:0px;padding:0px;border:none;color:blue;background-color:inherit;">'******'   <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//系统用户和密码  </span></span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"> 0: OK <span style="margin:0px;padding:0px;border:none;color:blue;background-color:inherit;">&quot;Success.&quot;  </span></li>
</ol></div>
<p style="padding:0px;margin:10px auto;text-indent:0px;">如果显示是上面的内容说是smtp是没有什么问题</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">七，cyrus-imapd生产邮件管理员账号,并添加测试账号</strong></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">安装完cyrus-imapd后会产生一个管理账号是cyrus，所属用户组是mail</p>
<div style="padding:0px;font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;overflow:auto;word-break:break-word;margin:18px 0px;">

<ol start="1" style="border:none;list-style:decimal;color:rgb(92, 92, 92);background-color:rgb(255, 255, 255);padding-left:40px;margin:0px 0px 1px 45px;padding:0px;">
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@linux sasl2]# id cyrus    <span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//imapd.conf里面默认的管理员账号就是cyrus  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"> uid=76(cyrus) gid=12(mail) groups=12(mail),76(saslauth)  </li>
</ol></div>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">在认证admin账号时，我发现32位系统和64位系统有一点不同，二种系统我都配置过，配置都是一样的，<br style="margin:0px;padding:0px;"/>但是出现的结果不一样，看下图</strong></p>
<div style="margin:0px;padding:0px;"><a href="http://blog.51yip.com/wp-content/uploads/2012/04/cyrus_imapd32.jpg" style="margin:0px;padding:0px;color:black;text-decoration:underline;"><div style="margin:0px;padding:0px;border:none;width:300px;height:85px;"></div></a>
<p style="padding:0px;margin:10px auto;text-indent:0px;">32位机器cyrus管理员用户认证</p>


</div>
<div style="margin:0px;padding:0px;"><a href="http://blog.51yip.com/wp-content/uploads/2012/04/cyrus_imapd64.jpg" style="margin:0px;padding:0px;color:black;text-decoration:underline;"><div style="margin:0px;padding:0px;border:none;width:300px;height:94px;"></div></a>
<p style="padding:0px;margin:10px auto;text-indent:0px;">64位机器cyrus管理员用户认证</p>


</div>
<p style="padding:0px;margin:10px auto;text-indent:0px;">从上图可以看出，32位的系统是不用加上--auth plain,64位的要，如果不加的话，根本进不去。</p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">进去后，我们来添加一下测试账号</p>
<div style="padding:0px;font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;overflow:auto;word-break:break-word;margin:18px 0px;"><ol start="1" style="border:none;list-style:decimal;color:rgb(92, 92, 92);background-color:rgb(255, 255, 255);padding-left:40px;margin:0px 0px 1px 45px;padding:0px;">
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@linux sasl2]# cyradm -u cyrus localhost  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"> IMAP Password:  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"> localhost&gt; cm tank  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"> localhost&gt; lm  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"> tank (\HasNoChildren)  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"> localhost&gt; quit  </li>


</ol></div>
<p style="padding:0px;margin:10px auto;text-indent:0px;">这样我们可以在/var/spool/imap中看到，生成的目录，32位机器和64位机器生成的目录是不一样的</p>
<div style="padding:0px;font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;overflow:auto;word-break:break-word;margin:18px 0px;">

<ol start="1" style="border:none;list-style:decimal;color:rgb(92, 92, 92);background-color:rgb(255, 255, 255);padding-left:40px;margin:0px 0px 1px 45px;padding:0px;">
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"><span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//这是64位系统生成的目录  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"> [root@localhost u]# ls  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"> user^tank  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"> [root@localhost u]# pwd  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"> /<span style="margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:bold;">var/spool/imap/u  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"><span style="margin:0px;padding:0px;border:none;color:rgb(0, 130, 0);background-color:inherit;">//这是32位系统生成的目录  </span></li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"> [root@linux t]# ls  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"> tank  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;color:rgb(92, 92, 92);line-height:1.6;background-color:rgb(248, 248, 248);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"> [root@linux t]# pwd  </li>
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;"> /<span style="margin:0px;padding:0px;border:none;color:rgb(0, 102, 153);background-color:inherit;font-weight:bold;">var/spool/imap/t  </span></li>


</ol></div>
<p style="padding:0px;margin:10px auto;text-indent:0px;"><strong style="margin:0px;padding:0px;">八，测试收发邮件</strong><br style="margin:0px;padding:0px;"/><strong style="margin:0px;padding:0px;"><br style="margin:0px;padding:0px;"/>测试前添加一下DNS，<br style="margin:0px;padding:0px;"/>1，mail.51yip.com A 默认 122.225.***.***<br style="margin:0px;padding:0px;"/>2，mail.51yip.com A 联通 60.12.***.***<br style="margin:0px;padding:0px;"/>3，@ MX 默认 mail.51yip.com<br style="margin:0px;padding:0px;"/>第1和第2，是添加二条A记录，第三行，设置了一下MX记录，这个千万不要忘了，不然你的域名是不通的。</strong></p>
<p style="padding:0px;margin:10px auto;text-indent:0px;">方法有很多，我们可以利用telnet来测试，不过用telnet来测试收发邮件比较麻烦，用linux自带的<br style="margin:0px;padding:0px;"/>mail命令就方便多了</p>
<div style="padding:0px;font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;overflow:auto;word-break:break-word;margin:18px 0px;">

<ol start="1" style="border:none;list-style:decimal;color:rgb(92, 92, 92);background-color:rgb(255, 255, 255);padding-left:40px;margin:0px 0px 1px 45px;padding:0px;">
<li style="border-left-color:rgb(108, 226, 108);margin-bottom:1em;border:none;list-style:decimal-leading-zero outside;border-left-width:3px;border-left-style:solid;line-height:1.6;color:inherit;background-color:rgb(255, 255, 255);list-style-type:decimal;padding:0px 3px 0px 10px;margin:0px;">[root@localhost u]# mail -s <span style="margin:0px;padding:0px;border:none;color:blue;background-color:inherit;">'看一下' 95219454@qq.com  &lt; /etc/imapd.conf  </span></li>


</ol></div>
<p style="padding:0px;margin:10px auto;text-indent:0px;">以前有朋友问我，他配置的邮件服务器，发出去的邮件都在垃圾箱里面，我配过几次都没有发现这种情况看下图</p>
<div style="margin:0px;padding:0px;"><a href="http://blog.51yip.com/wp-content/uploads/2012/04/receive_mail.jpg" style="margin:0px;padding:0px;color:black;text-decoration:underline;"><div style="margin:0px;padding:0px;border:none;width:300px;height:145px;"></div></a>
<p style="padding:0px;margin:10px auto;text-indent:0px;">发邮件已成功</p>


</div>
<div style="margin:0px;padding:0px;"><a href="http://blog.51yip.com/wp-content/uploads/2012/04/send_mail.jpg" style="margin:0px;padding:0px;color:black;text-decoration:underline;"><div style="margin:0px;padding:0px;border:none;width:300px;height:158px;"></div></a>
<p style="padding:0px;margin:10px auto;text-indent:0px;">从QQ发的邮件又成功</p>


</div>
<p style="padding:0px;margin:10px auto;text-indent:0px;">我们还可以通过maillog日志来查看邮件是否收发成功，看下图</p>
<div style="margin:0px;padding:0px;"><a href="http://blog.51yip.com/wp-content/uploads/2012/04/sr_ok.jpg" style="margin:0px;padding:0px;color:black;text-decoration:underline;"><div style="margin:0px;padding:0px;border:none;width:300px;height:35px;"></div></a>
<p style="padding:0px;margin:10px auto;text-indent:0px;">日志查看，收发邮件</p>


</div>
<p style="padding:0px;margin:10px auto;text-indent:0px;">到这儿，简单的邮件服务器就搭好了。</p>


</div></div></div></div></div></div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 