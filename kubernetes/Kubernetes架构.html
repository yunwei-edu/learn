<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600240 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="846"/>

<div>
<span><div><div><div style="-evernote-webclip:true;"><div style="letter-spacing: 0.034em; background-color: rgb(255, 255, 255);"><div style="overflow-wrap:break-word;hyphens:auto;"><div style="background-color:rgb(255, 255, 255);"><div style="overflow: hidden; overflow-wrap: break-word; text-align: justify;"><div style="margin: 1em auto; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; border-width: initial; border-color: initial; border-style: none; text-align: center; width: 18em;"><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><span style="display: inline-block;"><font style="font-size: 14pt;"><span style="box-sizing: border-box; letter-spacing: 0.442px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(0, 88, 156); color: rgb(255, 255, 255); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-webclip:true;">第2篇</span><span style="box-sizing: border-box; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; letter-spacing: 0.034em; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal;-evernote-webclip:true;">Kubernetes架构</span></font></span></div></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="box-sizing: border-box; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 14pt; letter-spacing: 0.034em; color: rgb(54, 101, 238); font-family: -apple-system-font; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;-evernote-webclip:true;">一、</span><span style="box-sizing: border-box; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 14pt; letter-spacing: 0.034em; color: rgb(54, 101, 238); font-family: -apple-system-font; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;-evernote-webclip:true;">Kubernetes</span> <span style="box-sizing: border-box; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 14pt; letter-spacing: 0.034em; color: rgb(54, 101, 238); font-family: -apple-system-font; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;-evernote-webclip:true;">架构：</span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="font-size: 16px; letter-spacing: 0.034em; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 28.8px;">Kubernetes Cluster 由 Master 和 Node 组成，节点上运行着若干 Kubernetes 服务。</span></div><div style="margin: 5px 0px 0px; padding: 10px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; border-style: none none none solid; border-color: rgb(0, 88, 156); box-shadow: rgb(153, 153, 153) 1px 1px 2px; border-left-width: 10px; background-color: rgb(243, 243, 243); text-align: left;"><span style="max-width: 100%;box-sizing: border-box;overflow-wrap: break-word;-evernote-webclip:true;"><font style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(168, 168, 168); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-weight: bold; line-height: 1.6;">Master 节点</span></font></span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 28.8px;">Master 是 Kubernetes Cluster 的大脑，运行着如下 Daemon 服务：kube-apiserver、kube-scheduler、kube-controller-manager、etcd 和 Pod 网络（例如 flannel）。</span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 28.8px;"><img src="Kubernetes架构_files/Image.png" type="image/png" data-filename="Image.png" style="font-family: -apple-system-font; font-size: 12pt; color: rgb(51, 51, 51);" width="409"/></span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="font-size: 19.2px;"><span style="font-size: 18px; letter-spacing: 0.034em; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-weight: bold; line-height: 28.8px;">API Server（kube-apiserver）</span></span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 28.8px;">API Server 提供 HTTP/HTTPS RESTful API，即 Kubernetes API。API Server 是 Kubernetes Cluster 的前端接口，各种客户端工具（CLI 或 UI）以及 Kubernetes 其他组件可以通过它管理 Cluster 的各种资源。</span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:18px;"><span style="font-size: 18px; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-weight: bold; line-height: 28.8px;">Scheduler（kube-scheduler）</span></span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 28.8px;">Scheduler 负责决定将 Pod 放在哪个 Node 上运行。Scheduler 在调度时会充分考虑 Cluster 的拓扑结构，当前各个节点的负载，以及应用对高可用、性能、数据亲和性的需求。</span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:18px;"><span style="font-size: 18px; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-weight: bold; line-height: 28.8px;">Controller Manager（kube-controller-manager）</span></span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 28.8px;">Controller Manager 负责管理 Cluster 各种资源，保证资源处于预期的状态。Controller Manager 由多种 controller 组成，包括 replication controller、endpoints controller、namespace controller、serviceaccounts controller 等。</span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 28.8px;">不同的 controller 管理不同的资源。例如 replication controller 管理 Deployment、StatefulSet、DaemonSet 的生命周期，namespace controller 管理 Namespace 资源。</span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:18px;"><span style="font-size: 18px; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-weight: bold; line-height: 28.8px;">etcd</span></span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 28.8px;">etcd 负责保存 Kubernetes Cluster 的配置信息和各种资源的状态信息。当数据发生变化时，etcd 会快速地通知 Kubernetes 相关组件。</span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;font-size:18px;"><span style="font-size: 18px; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-weight: bold; line-height: 28.8px;">Pod 网络</span></span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 28.8px;">Pod 要能够相互通信，Kubernetes Cluster 必须部署 Pod 网络，flannel 是其中一个可选方案。</span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 28.8px;">以上是 Master 上运行的组件，下一节我们讨论 Node。</span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><br/></div><div style="margin: 5px 0px 0px; padding: 10px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; border-style: none none none solid; border-color: rgb(0, 88, 156); box-shadow: rgb(153, 153, 153) 1px 1px 2px; border-left-width: 10px; background-color: rgb(243, 243, 243); text-align: left;"><font style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(168, 168, 168); font-weight: bold;">node节点</span></font></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system-font;">Node 是 Pod 运行的地方，Kubernetes 支持 Docker、rkt 等容器 Runtime。 Node上运行的 Kubernetes 组件有 kubelet、kube-proxy 和 Pod 网络（例如 flannel）。</span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="font-size: 16px; color: rgb(51, 51, 51); font-family: -apple-system-font;"><img src="Kubernetes架构_files/Image [1].png" type="image/png" data-filename="Image.png" style="font-family: -apple-system-font; font-size: 12pt; color: rgb(51, 51, 51);" width="408"/></span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="font-size: 16px;"><span style="font-size: 18px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); font-family: -apple-system-font; font-weight: bold; line-height: 28.8px;">kubelet</span></span></div><div style="margin-bottom: 1.5rem; font-size: 19.2px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); font-family: -apple-system-font; line-height: 28.8px;">kubelet 是 Node 的 agent，当 Scheduler 确定在某个 Node 上运行 Pod 后，会将 Pod 的具体配置信息（image、volume 等）发送给该节点的 kubelet，kubelet 根据这些信息创建和运行容器，并向 Master 报告运行状态。</span></div><div style="margin-bottom: 1.5rem; font-size: 19.2px; text-rendering: optimizeLegibility;"><span style="font-size: 18px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); font-family: -apple-system-font; font-weight: bold; line-height: 28.8px;">kube-pro</span><span style="font-size: 18px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); font-family: -apple-system-font; font-weight: bold; line-height: 28.8px;">xy</span></div><div style="margin-bottom: 1.5rem; font-size: 19.2px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); font-family: -apple-system-font; line-height: 28.8px;">service 在逻辑上代表了后端的多个 Pod，外界通过 service 访问 Pod。service 接收到的请求是如何转发到 Pod 的呢？这就是 kube-proxy 要完成的工作。</span></div><div style="margin-bottom: 1.5rem; font-size: 19.2px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); font-family: -apple-system-font; line-height: 28.8px;">每个 Node 都会运行 kube-proxy 服务，它负责将访问 service 的 TCP/UPD 数据流转发到后端的容器。如果有多个副本，kube-proxy 会实现负载均衡。</span></div><div style="margin-bottom: 1.5rem; font-size: 19.2px; text-rendering: optimizeLegibility;"><span style="font-size: 18px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); font-family: -apple-system-font; font-weight: bold; line-height: 28.8px;">Pod 网络</span></div><div style="margin-bottom: 1.5rem; font-size: 19.2px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); font-family: -apple-system-font; line-height: 28.8px;">Pod 要能够相互通信，Kubernetes Cluster 必须部署 Pod 网络，flannel 是其中一个可选方案。</span></div><h2 style="margin-top: 2.5rem; margin-bottom: 0.3rem;"><span style="font-size: 24px; color: rgb(51, 51, 51); font-family: -apple-system-font; font-weight: bold;">完整的架构</span><span style="font-size: 24px; color: rgb(51, 51, 51); font-family: -apple-system-font; font-weight: bold;">图</span></h2><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); font-family: -apple-system-font; line-height: 28.8px;">结合实验环境，我们得到了如下的架构图：</span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); font-family: -apple-system-font; line-height: 28.8px;"><img src="Kubernetes架构_files/Image [2].png" type="image/png" data-filename="Image.png" style="font-family: -apple-system-font; font-size: 12pt; color: rgb(51, 51, 51);" width="642"/></span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="font-size: 16px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); font-family: -apple-system-font; line-height: 28.8px;">你可能会问：为什么 k8s-master 上也有 kubelet 和 kube-proxy 呢？</span></span></div><div style="margin-bottom: 1.5rem; font-size: 19.2px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); font-family: -apple-system-font; line-height: 28.8px;">这是因为 Master 上也可以运行应用，即 Master 同时也是一个 Node。</span></div><div style="font-size: 19.2px; margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); font-family: -apple-system-font; line-height: 28.8px;">几乎所有的 Kubernetes 组件本身也运行在 Pod 里，执行如下命令：</span></div><div style="margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><span style="text-rendering: optimizeLegibility;"><span style="overflow: auto;"><span style="font-size: 12pt; color: rgb(54, 101, 238); line-height: 28.8px;">kubectl get pod --all-namespaces -o wide</span></span></span></div><div style="margin: 0px 0px 1.5rem; padding: 0px; max-width: 100%; box-sizing: inherit; clear: both; min-height: 1em; overflow-wrap: break-word; text-rendering: optimizeLegibility;"><img src="Kubernetes架构_files/Image [3].png" type="image/png" data-filename="Image.png" style="color: rgb(51, 51, 51); font-family: -apple-system-font; font-size: 12pt; letter-spacing: 0.034em;" width="642"/></div></div></div></div></div></div><div><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">Kubernetes 的系统组件都被放到 </span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">kube-system</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;"> namespace 中。这里有一个 </span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">kube-dns</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;"> 组件，它为 Cluster 提供 DNS 服务，我们后面会讨论。</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">kube-dns</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">是在执行 </span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">kubeadm init</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;"> 时（第 ⑤ 步）作为附加组件安装的。</span></div><div><br/></div><div><span style="box-sizing: border-box; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 14pt; letter-spacing: 0.034em; color: rgb(54, 101, 238); font-family: -apple-system-font; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;-evernote-webclip:true;">二、</span><span style="box-sizing: border-box; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 14pt; letter-spacing: 0.034em; color: rgb(54, 101, 238); font-family: -apple-system-font; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;-evernote-webclip:true;">Kubernetes</span> <span style="box-sizing: border-box; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 14pt; letter-spacing: 0.034em; color: rgb(54, 101, 238); font-family: -apple-system-font; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;-evernote-webclip:true;">实践：</span></div><div style="margin: 5px 0px 0px; padding: 10px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; border-style: none none none solid; border-color: rgb(0, 88, 156); box-shadow: rgb(153, 153, 153) 1px 1px 2px; border-left-width: 10px; background-color: rgb(243, 243, 243); text-align: left;"><font style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(168, 168, 168); font-weight: bold;">通过例子理解 k8s 架构 </span></font></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: -apple-system-font;">执行如下命令：</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">kubectl run httpd-app --image=</span><a href="http://reg.yunwei.edu/learn/httpd:latest" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">reg.yunwei.edu/learn/httpd:latest</a> <span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">--replicas=2</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">kubectl get deployment</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">kubectl get pod -n default -o wide</span></div></div><div><br/></div><div><img src="Kubernetes架构_files/Image [4].png" type="image/png" data-filename="Image.png" style="font-family: -apple-system-font; font-size: 12pt; color: rgb(51, 51, 51);" width="642"/></div><div><br/></div><div><span style="font-size: 12pt;">Kubernetes 部署了 deployment httpd-app，有两个副本 Pod，分别运行在</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">k8s-node2 和 k8s-node3</span><span style="font-size: 12pt;">上。</span></div><div><br/></div><div><span style="font-size: 16px;">详细讨论整个部署过程。</span></div><div><img src="Kubernetes架构_files/Image [5].png" type="image/png" data-filename="Image.png" width="642"/></div><div><br/></div><div><span style="white-space: normal; font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">① kubectl 发送部署请求到 API Server。</span></div><div style="margin-bottom: 1.5rem; font-size: 19.2px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">② API Server 通知 Controller Manager 创建一个 deployment 资源。</span></div><div style="margin-bottom: 1.5rem; font-size: 19.2px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">③ Scheduler 执行调度任务，将两个副本 Pod 分发到 k8s-node1 和 k8s-node2。</span></div><div style="margin-bottom: 1.5rem; font-size: 19.2px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">④ k8s-node1 和 k8s-node2 上的 kubectl 在各自的节点上创建并运行 Pod。</span></div><div style="margin-bottom: 1.5rem; font-size: 19.2px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">补充两点：</span></div><ol style="margin-left: 2rem;"><li><div style="margin-bottom: 1.5rem; font-size: 19.2px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; text-rendering: optimizeLegibility; line-height: 28.8px;">应用的配置和当前状态信息保存在 etcd 中，执行 </span><span style="font-size: 16px; text-rendering: optimizeLegibility; line-height: 28.8px;">kubectl get pod</span><span style="font-size: 16px; text-rendering: optimizeLegibility; line-height: 28.8px;"> 时 API Server 会从 etcd 中读取这些数据。</span></div></li><li><div style="margin-bottom: 1.5rem; font-size: 19.2px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; text-rendering: optimizeLegibility; line-height: 28.8px;">flannel 会为每个 Pod 都分配 IP。因为没有创建 service，目前 kube-proxy 还没参与进来。</span></div></li></ol><div><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">Kubernetes 架构就讨论到这里。从下节开始，我们将通过实践深入学习 Kubernetes 的各种特性。作为容器编排引擎，最重要也是最基本的功能当然是运行容器化应用。</span></div></div><div><br/></div><div><br style="font-size: 16px; color: rgb(51, 51, 51);"/></div><div><br style="font-size: 16px; color: rgb(51, 51, 51);"/></div><div style="margin: 5px 0px 0px; padding: 10px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; border-style: none none none solid; border-color: rgb(0, 88, 156); box-shadow: rgb(153, 153, 153) 1px 1px 2px; border-left-width: 10px; background-color: rgb(243, 243, 243); text-align: left;"><span style="max-width: 100%;clear: both;min-height: 1em;caret-color: rgb(51, 51, 51);letter-spacing: 0.544px;text-indent: 0px;text-transform: none;white-space: normal;word-spacing: 0px;-webkit-text-stroke-width: 0px;text-rendering: optimizeLegibility;word-wrap: break-word !important;box-sizing: border-box !important;-en-paragraph:true;"><font style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(168, 168, 168); font-family: -apple-system-font; font-variant-caps: normal; font-weight: bold; line-height: 28.8px;">用 Deployment 运行应用</span></font></span></div><div><br style="font-size: 16px; color: rgb(51, 51, 51);"/></div><div><span style="max-width: 100%; clear: both; min-height: 1em; caret-color: rgb(51, 51, 51); letter-spacing: 0.544px; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 16px; text-rendering: optimizeLegibility; word-wrap: break-word !important; box-sizing: border-box !important; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; line-height: 28.8px;-en-paragraph:true;">Kubernetes 作为容器编排引擎，最重要也是最基本的功能当然是运行容器化应用。</span></div><h2 style="padding: 0px; font-size: 16px; max-width: 100%; caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; letter-spacing: 0.544px; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; word-wrap: break-word !important;"></h2><h2 style="padding: 0px; font-size: 16px; max-width: 100%; caret-color: rgb(51, 51, 51); letter-spacing: 0.544px; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; text-size-adjust: auto; -webkit-text-stroke-width: 0px; word-wrap: break-word !important;"><span style="font-size: 20px; max-width: 100%; caret-color: rgb(51, 51, 51); letter-spacing: 0.544px; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; text-size-adjust: auto; -webkit-text-stroke-width: 0px; word-wrap: break-word !important; box-sizing: border-box !important; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; font-weight: bold;">Deployment</span></h2><div style="padding: 0px; max-width: 100%; clear: both; min-height: 1em; caret-color: rgb(51, 51, 51); letter-spacing: 0.544px; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 19.2px; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 1em; word-wrap: break-word !important;"><span style="max-width: 100%; clear: both; min-height: 1em; caret-color: rgb(51, 51, 51); letter-spacing: 0.544px; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 16px; text-rendering: optimizeLegibility; word-wrap: break-word !important; box-sizing: border-box !important; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; line-height: 28.8px;-en-paragraph:true;">前面我们已经了解到，Kubernetes 通过各种 Controller 来管理 Pod 的生命周期。为了满足不同业务场景，Kubernetes 开发了 Deployment、ReplicaSet、DaemonSet、StatefuleSet、Job 等多种 Controller。我们首先学习最常用的 Deployment。</span></div><div><span style="max-width: 100%; clear: both; min-height: 1em; caret-color: rgb(51, 51, 51); letter-spacing: 0.544px; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 16px; text-rendering: optimizeLegibility; word-wrap: break-word !important; box-sizing: border-box !important; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-variant-caps: normal; line-height: 28.8px;-en-paragraph:true;">（1）上面我们运行了一个http-app，下面详细分析 Kubernetes 都做了些什么工作。</span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(54, 101, 238); font-family: -apple-system-font;">kubectl get deployment -n default -o wide</span></span></div><div><img src="Kubernetes架构_files/Image [6].png" type="image/png" data-filename="Image.png" style="font-family: -apple-system-font; font-size: 12pt; color: rgb(51, 51, 51);" width="642"/></div><div><br/></div><div><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">接下来我们用 </span><span style="font-size: 16px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; color: rgb(54, 101, 238); line-height: 28.8px;">kubectl describe deployment httpd-app</span></span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">了解更详细的信息。</span></div><div><img src="Kubernetes架构_files/Image [7].png" type="image/png" data-filename="Image.png" width="642"/></div><div><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">大部分内容都是自解释的，我们重点看最下面部分。这里告诉我们创建了一个 ReplicaSet <span style="font-size: 12pt; color: rgb(51, 51, 51); line-height: 28.8px;">httpd-app-cfb6dc947</span></span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">，</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">Events</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;"> 是 Deployment 的日志，记录了 ReplicaSet 的启动过程。</span></div><div><br/></div><div><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">（2）通过上面的分析，也验证了 Deployment 通过 ReplicaSet 来管理 Pod 的事实。接着我们将注意力切换到 <span style="font-size: 12pt; color: rgb(51, 51, 51); line-height: 28.8px;">httpd-app-cfb6dc947</span></span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">，执行 </span><span style="font-size: 16px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; color: rgb(54, 101, 238); line-height: 28.8px;">kubectl describe replicaset</span></span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">：</span></div><div><img src="Kubernetes架构_files/Image [8].png" type="image/png" data-filename="Image.png" style="font-size: 12pt; color: rgb(51, 51, 51);" width="642"/></div><div><br/></div><div><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">两个副本已经就绪，用 </span><span style="font-size: 16px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; color: rgb(54, 101, 238); line-height: 28.8px;">kubectl describe replicaset</span></span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;"> 查看详细信息：</span></div><div><img src="Kubernetes架构_files/Image [9].png" type="image/png" data-filename="Image.png" style="font-size: 12pt; color: rgb(51, 51, 51);" width="642"/></div><div><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">Controlled By</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;"> 指明此 ReplicaSet 是由 <span style="font-size: 12pt; color: rgb(51, 51, 51); line-height: 28.8px;">Deployment/httpd-app</span></span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;"> 创建。</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">Events</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;"> 记录了两个副本 Pod 的创建。</span></div><div><br/></div><div><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">（3）接着我们来看 Pod，执行 </span><span style="font-size: 16px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; color: rgb(54, 101, 238); line-height: 28.8px;">kubectl get pod </span><span style="font-size: 12pt; color: rgb(54, 101, 238); line-height: 28.8px;">-n default</span></span></div><div><img src="Kubernetes架构_files/Image [10].png" type="image/png" data-filename="Image.png" width="573"/></div><div><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">两个副本 Pod 都处于 </span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">Running</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;"> 状态，用 </span><span style="font-size: 16px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; color: rgb(54, 101, 238); line-height: 28.8px;">kubectl describe pod</span></span><span style="font-size: 16px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; color: rgb(54, 101, 238); line-height: 28.8px;"> </span><span style="font-size: 12pt; text-rendering: optimizeLegibility; color: rgb(54, 101, 238); line-height: 28.8px;">-n default </span><span style="font-size: 16px; color: rgb(51, 51, 51); line-height: 28.8px;">查看更详细的信息：</span></span></div><div><img src="Kubernetes架构_files/Image [11].png" type="image/png" data-filename="Image.png" style="font-size: 12pt; color: rgb(51, 51, 51);" width="642"/></div><div><img src="Kubernetes架构_files/Image [12].png" type="image/png" data-filename="Image.png" width="642"/></div><div><img src="Kubernetes架构_files/Image [13].png" type="image/png" data-filename="Image.png" width="642"/></div><div><img src="Kubernetes架构_files/Image [14].png" type="image/png" data-filename="Image.png" width="642"/></div><div><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">Controlled By</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;"> 指明此 Pod 是由 <span style="font-size: 12pt; color: rgb(51, 51, 51); line-height: 28.8px;">ReplicaSet/httpd-app-cfb6dc947</span></span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;"> 创建。</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">Events</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;"> 记录了 Pod 的启动过程（</span><span style="font-size: 12pt; color: rgb(51, 51, 51); line-height: 28.8px;">httpd-app-cfb6dc947-mrtlz 和 <span style="font-size: 12pt; color: rgb(51, 51, 51); line-height: 28.8px;">httpd-app-cfb6dc947-rhgbs</span></span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">）。</span><span style="font-size: 16px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; color: rgb(255, 70, 53); line-height: 28.8px;">如果操作失败（比如 image 不存在），也能在这里查看到原因。</span></span></div><div style="margin-bottom: 1.5rem; font-size: 19.2px; text-rendering: optimizeLegibility;"><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">总结一下这个过程：</span></div><ol style="margin-left: 2rem;"><li><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px;-en-paragraph:true;">用户通过 </span><span style="font-size: 16px;-en-paragraph:true;">kubectl</span><span style="font-size: 16px;-en-paragraph:true;"> 创建 Deployment。</span></div></li><li><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px;-en-paragraph:true;">Deployment 创建 ReplicaSet。</span></div></li><li><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px;-en-paragraph:true;">ReplicaSet 创建 Pod。</span></div></li></ol><div style="margin-top: 1em; margin-bottom: 1em;"><img src="Kubernetes架构_files/Image [15].png" type="image/png" data-filename="Image.png" width="472"/></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">从上图也可以看出，对象的命名方式是：</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">子对象的名字</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;"> = </span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">父对象名字</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;"> + </span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">随机字符串或数字</span><span style="font-size: 16px; text-rendering: optimizeLegibility; color: rgb(51, 51, 51); line-height: 28.8px;">。</span></div></div><div><br/></div></span>
</div></body></html> 