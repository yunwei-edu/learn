<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="3905"/>

<div>
<span><div style="outline:0px;box-sizing:border-box;"><div style="box-sizing: inherit; outline: 0px; font-size: 14px; background-color: rgb(245, 246, 247);"><div style="outline:0px;box-sizing:border-box;"><div style="color: rgb(51, 51, 51); box-sizing: inherit; outline: 0px; margin: 0px; position: relative; padding: 0px 24px 16px; background: rgb(255, 255, 255); box-shadow: rgba(0, 0, 0, 0.05) 0px 2px 4px 0px;"><div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;border-bottom:1px solid rgb(224, 224, 224);padding-top:16px;z-index:9;background-color:rgb(255, 255, 255);"><div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;"><div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;margin-bottom:8px;"><div><span style="font-size: 16px; min-width: 100%; position: relative;"><span style="font-size: 24px;">Centos7之pacemaker高可用安装配置详解</span><br/></span></div></div><div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;padding-bottom:14px;position:relative;"><div style="width: 88%; height: 24px; box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px; overflow: hidden;"><br/></div></div></div></div><div style="box-sizing: inherit; outline: 0px; position: relative; padding-top: 16px;"><div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;word-break:break-all;"><div style="box-sizing: inherit; outline: 0px; padding: 0px; margin: 0px; word-break: break-all;"><div><br/></div><table border="1" cellpadding="2" cellspacing="0" style="border-spacing: 0px; font-size: 14px; word-break: break-all; box-sizing: border-box; outline: 0px; border-collapse: collapse; width: 600px; text-align: left; margin-bottom: 24px; background-color: inherit;"><colgroup><col style="width: 579px;"></col></colgroup><tbody style="outline:0px;box-sizing:border-box;border:0px;word-break:break-all;background-color:inherit;"><tr style="border-right-color:initial;word-break:break-all;outline:0px;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;border-left-style:initial;box-sizing:border-box;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgb(221, 221, 221);background-color:inherit;"><td style="border: 1px solid rgb(153, 153, 153); word-break: break-all; outline: 0px; padding: 8px; margin: 0px; text-align: left; box-sizing: border-box; font-size: 14px; min-height: 25px; background-color: inherit;" valign="top"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: rgb(247, 150, 70);"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">申明：</span></span></span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:rgb(216,216,216);"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">centos7的pacemaker与之前6使用的方法不一致，即使用centos6.x的方法在centos7.x上面配置pacemaker不能成功。</span></span></span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:rgb(216,216,216);"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">因此openstack 上面的centos7.1如果使用官方文档直接配置高可用HA也是无法成功的。（吐槽：openstack的liberty出的HA方案官方文档不适用于centos7.x）</span></span></span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:rgb(216,216,216);"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">关于openstack liberty版本的高可用HA方案请参考下述实验！！！</span></span></span></div></div></td></tr></tbody></table><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5;">PS：与pacemaker高可用方案相对</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5;">应的</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5;">keepalived原理（主从配置+haproxy）及配置文件详解</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5;">请参</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5;">考博文：</span><a href="http://blog.csdn.net/tantexian/article/details/50056229" rel="nofollow" style="outline: 0px; cursor: pointer; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; color: rgb(78, 161, 219); text-decoration: none;" target="_blank">http://blog.csdn.net/tantexian/article/details/50056229</a></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">centos7配置pacemaker官方文档地址：</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/High_Availability_Add-On_Administration/ch-startup-HAAA.html" rel="nofollow" style="outline: 0px; cursor: pointer; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; color: rgb(78, 161, 219); text-decoration: none;" target="_blank">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/High_Availability_Add-On_Administration/ch-startup-HAAA.html</a></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">pacemaker使用翻译：</span><a href="http://clusterlabs.org/doc/zh-CN/Pacemaker/1.1/html-single/Clusters_from_Scratch/" rel="nofollow" style="outline: 0px; cursor: pointer; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; color: rgb(78, 161, 219); text-decoration: none;" target="_blank">http://clusterlabs.org/doc/zh-CN/Pacemaker/1.1/html-single/Clusters_from_Scratch/</a></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; border: 0px; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;"><img src="pacemaker_files/tantexianF15B70EAFF1E4F328467C4469548CC44" type="image/png" data-filename="tantexianF15B70EAFF1E4F328467C4469548CC44" height="56" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;display:inline-block;background-color:inherit;" width="348"/></span></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><div><br/></div><table border="1" cellpadding="2" cellspacing="0" style="border-collapse: collapse; font-size: inherit; width: 600px; outline: 0px; border-spacing: 0px; box-sizing: border-box; text-align: left; margin-bottom: 24px; word-break: break-all; background-color: inherit;"><colgroup><col style="width: 579px;"></col></colgroup><tbody style="outline:0px;box-sizing:border-box;border:0px;word-break:break-all;background-color:inherit;"><tr style="border-right-color:initial;word-break:break-all;outline:0px;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;border-left-style:initial;box-sizing:border-box;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgb(221, 221, 221);background-color:inherit;"><td style="border: 1px solid rgb(153, 153, 153); word-break: break-all; outline: 0px; padding: 8px; margin: 0px; text-align: left; box-sizing: border-box; font-size: 14px; min-height: 25px; background-color: inherit;" valign="top"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;">Pacemaker’s key features include:</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all; background-color: inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;">监测并恢复节点和服务级别的故障</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all; background-color: inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;">存储无关，并不需要共享存储</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all; background-color: inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;">资源无关，任何能用脚本控制的资源都可以作为服务</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all; background-color: inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;">Supports </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;">fencing</span><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;"> (also referred to as the </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;">STONITH</span><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;"> acronym, </span><a href="http://clusterlabs.org/doc/zh-CN/Pacemaker/1.1/html-single/Clusters_from_Scratch/#s-intro-stonith" rel="nofollow" style="outline: 0px; cursor: pointer; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal; color: rgb(78, 161, 219); text-decoration: none;" target="_blank">deciphered</a><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;"> later on) for ensuring data integrity</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all; background-color: inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;">支持大型或者小型的集群</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all; background-color: inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;">Supports both quorate and resource-driven clusters</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all; background-color: inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;">Supports practically any redundancy configuration</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all; background-color: inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;">自动同步各个节点的配置文件</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all; background-color: inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;">可以设定集群范围内的ordering, colocation and anti-colocation</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all; background-color: inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;">Support for advanced service types</span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all; background-color: inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;">Clones:为那些要在多个节点运行的服务所准备的</span></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all; background-color: inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;">Multi-state: for services with multiple modes (e.g. master/slave, primary/secondary)</span></div></div></div></div><div style="outline: 0px; padding: 0px; box-sizing: border-box; margin: 8px 0px 0px 32px; list-style-type: disc; word-break: break-all; background-color: inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;liberation sans&quot;, &quot;Myriad &quot;, &quot;Bitstream Vera Sans&quot;, &quot;Lucida Grande&quot;, &quot;Luxi Sans&quot;, &quot;Trebuchet MS&quot;, helvetica, verdana, arial, sans-serif; line-height: 22px; font-weight: normal;">Unified, scriptable cluster management tools</span></div></div></div></div></td></tr></tbody></table><div><br/></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:rgb(255,192,0);"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 18px; background-color: inherit; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">本次实验环境：</span></span></span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">centos7.1 </span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">node31：172.31.2.31</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">node32 :  172.31.2.32</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">node31、node32两台机器上面都安装pacemaker，因此下述操作都需要在两天机器上面执行。</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: rgb(247, 150, 70); font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">1、配置防火墙端口及关闭selinux</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">systemctl</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;"> disable firewalld</span></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><div><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">systemctl</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;"> stop firewalld</span></span></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">iptables -F</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: rgb(247, 150, 70); font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">2、配置hostname：</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;"> hostnamectl --static --transient  set-hostname node31</span></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;"> hostnamectl --static --transient  set-hostname node32</span></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">vim /etc/hosts</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;"><img src="pacemaker_files/tantexianA945195EFCD6483ABEDC9E7DC3E3F62A" type="image/png" data-filename="tantexianA945195EFCD6483ABEDC9E7DC3E3F62A" height="133" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;display:inline-block;background-color:inherit;" width="813"/></span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:rgb(247,150,70);"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">3、时间同步：</span></span></span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5;">yum install ntp -y</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><div><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">ntpdate cn.pool.ntp.org</span></span></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: rgb(247, 150, 70); font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">4、双机互信（本次实验发现，不配置双机互信似乎也不会出现问题）：</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">ssh-keygen -t rsa</span></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;"><img src="pacemaker_files/tantexian3F24B753B2584EF89E9FDC5B997E7190" type="image/png" data-filename="tantexian3F24B753B2584EF89E9FDC5B997E7190" height="566" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;display:inline-block;background-color:inherit;" width="763"/></span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">复制id_rsa.pub文件：</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">scp /root/.ssh/id_rsa.pub </span><a href="https://blog.csdn.net/tantexian/article/details/50160959mailto:root@172.31.2.32" rel="nofollow" style="outline: 0px; cursor: pointer; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; font-family: 微软雅黑; line-height: 1.57143; color: rgb(78, 161, 219); text-decoration: none;" target="_blank">root@172.31.2.32</a><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">:/root/.ssh/authorized_keys</span></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;"><img src="pacemaker_files/tantexian838A9C84C09F4C99AF6D647DDED3ED87" type="image/png" data-filename="tantexian838A9C84C09F4C99AF6D647DDED3ED87" height="153" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;display:inline-block;background-color:inherit;" width="852"/></span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: rgb(247, 150, 70); font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">注：在node32执行同样的互信操作。</span></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:rgb(247,150,70);"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">5、安装pacemaker集群相关组件：</span></span></span></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">yum install pcs </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">pacemaker </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">corosync </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">fence-agents-all -y </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5;"> </span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:rgb(247,150,70);"><span lang="en-us" style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143; font-style: italic;" xml:lang="en-us">6、启动pcsd服务（</span><span lang="zh-cn" style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit;" xml:lang="zh-cn"><span lang="zh-cn" style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143; font-style: italic;" xml:lang="zh-cn">开机自启动）</span></span></span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">systemctl</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;"> </span>start pcsd</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">.</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">service</span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">systemctl</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;"> </span>enable pcsd</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">.</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 1.57143;">service</span></div></div></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: rgb(247, 150, 70); font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">7、创建集群用户：</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">passwd hacluster（此用户在安装pcs时候会自动创建）</span></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;"><img src="pacemaker_files/tantexian77F4B47681874466B7186EFFD9CFB101" type="image/png" data-filename="tantexian77F4B47681874466B7186EFFD9CFB101" height="102" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;display:inline-block;background-color:inherit;" width="652"/></span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">上述所有操作都需要在两个节点上面执行。</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"></div><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: rgb(247, 150, 70); color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">8、<span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5;">集群各节点之间进行认证：</span></span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">pcs cluster auth node31 node32（此处需要输入的用户名必须为pcs自动创建的hacluster，其他用户不能添加成功）</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;"><img src="pacemaker_files/tantexianBB7017E74AFE41ABAFEB352E3A9E4624" type="image/png" data-filename="tantexianBB7017E74AFE41ABAFEB352E3A9E4624" height="95" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;display:inline-block;background-color:inherit;" width="601"/></span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: rgb(247, 150, 70); font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">9，创建并启动名为my_cluster的集群，其中node31 node32为集群成员：</span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">pcs cluster setup --start --name my_cluster node31 node32</span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;"><img src="pacemaker_files/tantexian32F2706EF1094E358ED3A10AADE46CB4" type="image/png" data-filename="tantexian32F2706EF1094E358ED3A10AADE46CB4" height="205" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;display:inline-block;background-color:inherit;" width="852"/></span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: rgb(247, 150, 70); font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">10、设置集群自启动：</span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">pcs cluster enable --all</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;"><img src="pacemaker_files/tantexianD1BA6ACC497B4C61B9164973259773D0" type="image/png" data-filename="tantexianD1BA6ACC497B4C61B9164973259773D0" height="79" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;display:inline-block;background-color:inherit;" width="474"/></span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: rgb(247, 150, 70); font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">11、查看并设置集群属性：</span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><div><br/></div><table border="1" cellpadding="2" cellspacing="0" style="border-collapse: collapse; font-size: inherit; width: 600px; outline: 0px; border-spacing: 0px; box-sizing: border-box; text-align: left; margin-bottom: 24px; word-break: break-all; background-color: inherit;"><colgroup><col style="width: 579px;"></col></colgroup><tbody style="outline:0px;box-sizing:border-box;border:0px;word-break:break-all;background-color:inherit;"><tr style="border-right-color:initial;word-break:break-all;outline:0px;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;border-left-style:initial;box-sizing:border-box;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgb(221, 221, 221);background-color:inherit;"><td style="border: 1px solid rgb(153, 153, 153); word-break: break-all; outline: 0px; padding: 8px; margin: 0px; text-align: left; box-sizing: border-box; font-size: 14px; min-height: 25px; background-color: inherit;" valign="top"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">查看当前集群状态：</span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: Monaco, Consolas, Courier, &quot;Lucida Console&quot;, monospace; line-height: 22px; font-weight: normal;">pcs cluster status</span></div></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;"><img src="pacemaker_files/tantexian6E32A5741FEC49A8B11CB69954799C2D" type="image/png" data-filename="tantexian6E32A5741FEC49A8B11CB69954799C2D" height="112" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;display:inline-block;background-color:inherit;" width="583"/></span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">检查pacemaker服务：</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">ps aux | grep pacemaker</span></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;"><img src="pacemaker_files/tantexian40800442E13C4E20B0EEAF67B28F10EC" type="image/png" data-filename="tantexian40800442E13C4E20B0EEAF67B28F10EC" height="111" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;display:inline-block;background-color:inherit;" width="583"/></span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">检验Corosync的安装及当前</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">corosync状态：</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">corosync-cfgtool -s</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">corosync-cmapctl | grep members</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">pcs status corosync</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><div><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">检查配置是否正确（假若没有输出任何则配置正确）：</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">crm_verify -L -V</span></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">禁用</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">STONITH：</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">pcs property set stonith-enabled=false</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><div><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">无法仲裁时候，选择忽略：</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><div><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;">pcs property set no-quorum-policy=ignore</span></span></span></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: 微软雅黑; line-height: 22px; font-weight: normal;"><img src="pacemaker_files/tantexianC598CC6285A4488FAF7F60A9AA78DF1C" type="image/png" data-filename="tantexianC598CC6285A4488FAF7F60A9AA78DF1C" height="81" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;display:inline-block;background-color:inherit;" width="583"/></span></div></div></td></tr></tbody></table><div><br/></div></div></div></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: rgb(247, 150, 70); font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.57143;">12、pcs resource资源属性配置：</span></div><div style="outline: 0px; padding: 0px; margin: 0px; box-sizing: border-box; word-break: break-all; font-size: 14px; background-color: inherit;"><div><br/></div><table border="1" cellpadding="2" cellspacing="0" style="border-collapse: collapse; font-size: inherit; width: 600px; outline: 0px; border-spacing: 0px; box-sizing: border-box; text-align: left; margin-bottom: 24px; word-break: break-all; background-color: inherit;"><colgroup><col style="width: 579px;"></col></colgroup><tbody style="outline:0px;box-sizing:border-box;border:0px;word-break:break-all;background-color:inherit;"><tr style="border-right-color:initial;word-break:break-all;outline:0px;border-width:1px 0px 0px;border-right-style:initial;border-bottom-style:initial;border-left-style:initial;box-sizing:border-box;border-bottom-color:initial;border-left-color:initial;border-image:initial;border-top-style:solid;border-top-color:rgb(221, 221, 221);background-color:inherit;"><td style="border: 1px solid rgb(153, 153, 153); word-break: break-all; outline: 0px; padding: 8px; margin: 0px; text-align: left; box-sizing: border-box; font-size: 14px; min-height: 25px; background-color: inherit;" valign="top"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><div><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;">Pacemaker / Corosync 是 Linux 下一组常用的高可用集群系统。Pacemaker 本身已经自带了很多常用应用的管理功能。但是如果要使用 Pacemaker 来管理自己实现的服务或是一些别的没现成的东西可用的服务时，就需要自己实现一个资源了。</span></span></span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;">其中<span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;">Pacemaker 自带的资源管理程序都在 /usr/lib/ocf/resource.d 下。其中的 heartbeat 目录中就包含了那些自带的常用服务。那些服务的脚本可以作为我们自己实现时候的参考。</span></span></span></span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;">更多关于自定义资源请参考博文：</span><a href="http://blog.csdn.net/tantexian/article/details/50160159" rel="nofollow" style="outline: 0px; cursor: pointer; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal; color: rgb(78, 161, 219); text-decoration: none;" target="_blank">http://blog.csdn.net/tantexian/article/details/50160159</a></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><div><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;">接下来针对一些常用的pcs命令进行简要讲解。</span></span></span></span></span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><div><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;">查看<span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;">pcs resource针对资源操作用法：</span></span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><div><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;">pcs resource help</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;"><img src="pacemaker_files/tantexian1FA2D7EC353240C2A1AB4B71A9EE63BC" type="image/png" data-filename="tantexian1FA2D7EC353240C2A1AB4B71A9EE63BC" height="551" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;display:inline-block;background-color:inherit;" width="583"/></span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;">查看pcs支持的资源代理标准：</span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;">pcs resource providers</span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;"><img src="pacemaker_files/tantexianD30D099975944B38AC209CCFC17772C4" type="image/png" data-filename="tantexianD30D099975944B38AC209CCFC17772C4" height="143" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;display:inline-block;background-color:inherit;" width="551"/></span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;">注：</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;">Pacemaker 的资源主要有</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;">ocf、lsb、</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;">service、</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;">systemd、</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;">stonith几大类</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;">。LSB是为了促进 Linux 不同发行版间的兼容性，LSB（Linux Standards Base）开发了一系列标准，使各种软件可以很好地在兼容 LSB 标准的系统上运行， LSB 即 Linux 标准服务，通常就是 /etc/init.d 目录下那些脚本。Pacemaker 可以用这些脚本来启停服务，可以通过</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;">pcs resource list lsb查看</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;">。</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;">另一类 OCF 实际上是对 LSB 服务的扩展，增加了一些高可用集群管理的功能如故障监控等和更多的元信息。可以通过 </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;">pcs resource list ocf</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;"> </span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;">看到当前支持的资源。要让 pacemaker 可以很好的对服务进行高可用保障就得实现一个 OCF 资源。</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;">CentOS7</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;"> 使用systemd替换了SysV。Systemd目的是要取代</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;">Unix</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;">时代以来一直在使用的init系统，兼容SysV和</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;">LSB</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 1.5; font-weight: normal;">的启动脚本，而且够在进程启动过程中更有效地引导加载服务。</span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><div><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;">查看pacemaker支持资源高可用的列表：</span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;">pcs resource list</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;"><img height="0" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;display:inline-block;background-color:inherit;" width="0"></img></span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;">假若想查看httpd（apache）可使用：</span><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;">pcs resource list | grep apache</span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;"><img src="pacemaker_files/tantexian8D9C348CE9F04E42915B38CB4DBEA40F" type="image/png" data-filename="tantexian8D9C348CE9F04E42915B38CB4DBEA40F" height="63" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;display:inline-block;background-color:inherit;" width="583"/></span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><span style="outline: 0px; box-sizing: border-box; word-break: break-all; background-color: inherit; font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;">具体apache用法：</span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;">pcs resource describe ocf:heartbeat:apache</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><span style="font-size: 14px; color: rgb(79, 79, 79); font-family: &quot;Microsoft YaHei&quot;, 微软雅黑, &quot;Microsoft JhengHei&quot;, 华文黑体, arial, sans-serif, STHeiti, sans-serif; line-height: 22px; font-weight: normal;"><img src="pacemaker_files/tantexian570ACF844EB042A68FE5463F2C858D29" type="image/png" data-filename="tantexian570ACF844EB042A68FE5463F2C858D29" height="250" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;display:inline-block;background-color:inherit;" width="583"/></span></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;min-width:2px;background-color:inherit;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;background-color:inherit;"/></div></td></tr></tbody></table><div><br/></div></div></div></div></div></div></div></div></div><div><br/></div></span>
</div></body></html> 