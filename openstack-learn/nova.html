<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600240 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="649"/>

<div>
<span><div style="-evernote-webclip:true;"><div style="letter-spacing: 0.034em; background-color: rgb(255, 255, 255);"><div style="overflow-wrap:break-word;hyphens:auto;"><div style="background-color:rgb(255, 255, 255);"><div style="margin: 0px; padding: 0px; overflow: hidden; overflow-wrap: break-word; text-align: justify; position: relative;"><div style="font-size: 17px; text-align: center; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><span style="font-size: 16px; display: inline-block;"><span style="font-size: 18.6667px; display: inline-block; background-color: rgb(0, 88, 156); color: rgb(255, 255, 255); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;-evernote-webclip:true;">第二篇</span><span style="font-size: 16pt;display: inline-block;letter-spacing: 0.034em;-evernote-webclip:true;">nova</span><span style="font-size: 16pt;display: inline-block;letter-spacing: 0.034em;-evernote-webclip:true;">— 计算服务</span></span></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="letter-spacing: 0.034em; font-size: 14pt; color: rgb(54, 101, 238); font-family: -apple-system-font;-evernote-webclip:true;">一、nova介绍：</span></div><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">     </span></div><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">      Nova 是 OpenStack 最核心的服务，负责维护和管理云环境的计算资源。OpenStack 作为 IaaS 的云操作系统，虚拟机生命周期管理也就是通过 Nova 来实现的。</span></div><div><br/></div><div><span style="font-size: 13pt; color: rgb(51, 51, 51); font-family: -apple-system-font;">用途与功能 :</span></div><div><span style="font-size: 13pt; color: rgb(51, 51, 51); font-family: -apple-system-font;">1) 实例生命周期管理</span></div><div><span style="font-size: 13pt; color: rgb(51, 51, 51); font-family: -apple-system-font;">2) 管理计算资源</span></div><div><span style="font-size: 13pt; color: rgb(51, 51, 51); font-family: -apple-system-font;">3) 网络和认证管理</span></div><div><span style="font-size: 13pt; color: rgb(51, 51, 51); font-family: -apple-system-font;">4)</span><span style="font-size: 13pt; letter-spacing: 0.034em; color: rgb(51, 51, 51); font-family: -apple-system-font;">REST 风格的 API</span></div><div><span style="font-size: 13pt; letter-spacing: 0.034em; color: rgb(51, 51, 51); font-family: -apple-system-font;">5) 异步的一致性通信</span></div><div><span style="font-size: 13pt; letter-spacing: 0.034em; color: rgb(51, 51, 51); font-family: -apple-system-font;">6)Hypervisor 透明：支持Xen,XenServer/XCP,KVM, UML, VMware vSphere and Hyper-V</span></div><div><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;"><img src="nova_files/640.jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;width:677px !important;visibility:visible !important;" title="http://7xo6kd.com1.z0.glb.clouddn.com/upload-ueditor-image-20160419-1461074052420062067.png" width="677"/></span></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">在上图中可以看到，Nova 处于 Openstak 架构的中心，其他组件都为 Nova 提供支持： Glance 为 VM 提供 image Cinder 和 Swift 分别为 VM 提供块存储和对象存储 Neutron 为 VM 提供网络连接。</span></div><div><br/></div><div><span style="font-size: 17px;"><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">Nova 架构如下：</span></span></div><div><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;"><img src="nova_files/640 [1].jpg" type="image/jpeg" data-filename="640.jpg" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;width:407px !important;visibility:visible !important;" title="http://7xo6kd.com1.z0.glb.clouddn.com/upload-ueditor-image-20160419-1461074078681029733.png" width="407"/></span></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div style="font-size: 17px;"><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">Nova 的架构比较复杂，包含很多组件。 这些组件以子服务（后台 deamon 进程）的形式运行，可以分为以下几类：</span></div><div style="font-size: 17px;"><br/></div></div><div style="font-size: 17px; margin: 5px 0px 0px; padding: 10px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; border-style: none none none solid; border-color: rgb(0, 88, 156); box-shadow: rgb(153, 153, 153) 1px 1px 2px; border-left-width: 10px; background-color: rgb(243, 243, 243);"><span style="font-size: 17px; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; color: rgb(153, 153, 153); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 25px;">API</span></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><span style="font-size: 17px; border-width: 0px; border-style: initial; border-color: initial; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; white-space: pre; color: rgb(51, 51, 51); font-family: 微软雅黑; line-height: 28px;">nova-api</span></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px;"><span style="font-size: 13pt;"><span style="font-size: 13pt; color: rgb(51, 51, 51); line-height: 1.6; font-family: -apple-system-font;">是整个 Nova 组件的门户，</span><span style="font-size: 13pt; color: rgb(51, 51, 51); line-height: 1.6; font-family: -apple-system-font;">接收和响应客户的 API 调用。</span><span style="font-size: 13pt; color: rgb(51, 51, 51); line-height: 1.6; font-family: -apple-system-font;">所有对 Nova 的请求都首先由 nova-api 处理。nova-api 向外界暴露若干 HTTP REST API 接口 在 keystone 中我们可以查询 nova-api 的 endponits。</span></span></span></div><div><span style="font-size: 17px;"><img src="nova_files/Image.png" type="image/png" data-filename="Image.png" style="font-family: -apple-system-font; font-size: 13pt; color: rgb(51, 51, 51);" width="642"/></span></div><div><span style="font-size: 13pt; color: rgb(51, 51, 51); font-family: -apple-system-font;">客户端就可以将请求发送到 endponits 指定的地址，向 nova-api 请求操作。 当然，作为最终用户的我们不会直接发送 Rest AP I请求。 OpenStack CLI，Dashboard 和其他需要跟 Nova 交换的组件会使用这些 API。</span></div><div><br/></div><div><span style="font-size: 13pt; color: rgb(51, 51, 51); font-family: -apple-system-font;">Nova-api 对接收到的 HTTP API 请求会做如下处理：</span></div><div><span style="font-size: 13pt; color: rgb(51, 51, 51); font-family: -apple-system-font;">1. 检查客户端传入的参数是否合法有效</span></div><div><span style="font-size: 13pt; color: rgb(51, 51, 51); font-family: -apple-system-font;">2. 调用 Nova 其他子服务的处理客户端 HTTP 请求</span></div><div><span style="font-size: 13pt; color: rgb(51, 51, 51); font-family: -apple-system-font;">3. 格式化 Nova 其他子服务返回的结果并返回给客户端</span></div><div><br/></div><div><span style="font-size: 13pt; color: rgb(51, 51, 51); font-family: -apple-system-font;">nova-api 接收哪些请求？</span></div><div><span style="font-size: 13pt; color: rgb(51, 51, 51); font-family: -apple-system-font;">简单的说，只要是跟虚拟机生命周期相关的操作，nova-api 都可以响应。 大部分操作都可以在 Dashboard 上找到。打开Instance管理界面</span></div><div><span style="font-size: 17px;"><img src="nova_files/Image [1].png" type="image/png" data-filename="Image.png" style="font-family: -apple-system-font; font-size: 13pt; color: rgb(51, 51, 51);" width="556"/></span></div><div><span style="font-size: 17px;"><span style="font-size: 13pt;"><span style="font-size: 13pt; color: rgb(51, 51, 51); line-height: 1.6; font-family: -apple-system-font;">除了提供 OpenStack 自己的API，nova-api 还支持 Amazon EC2 API。 也就是说，如果客户以前使用 Amazon EC2，并且用 EC2 的 API 开发了些工具来管理虚机，那么如果现在要换成 OpenStack，这些工具可以无缝迁移到 OpenStack，因为 nova-api 兼容 EC2 API，无需做任何修改。</span></span></span></div><div><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div></div><div style="font-size: 17px; margin: 5px 0px 0px; padding: 10px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; border-style: none none none solid; border-color: rgb(0, 88, 156); box-shadow: rgb(153, 153, 153) 1px 1px 2px; border-left-width: 10px; background-color: rgb(243, 243, 243);"><span style="font-size: 17px; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; color: rgb(153, 153, 153); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 25px;">Compute Core</span></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><span style="font-size: 17px; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">a）nova-scheduler：</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">虚机调度服务，负责决定在哪个计算节点上运行虚机。</span><span style="-evernote-webclip:true;"><span style="color: rgb(51, 51, 51); font-family: -apple-system-font; line-height: 1.6; font-size: 12pt;">创建 Instance 时，用户会提出资源需求，例如 CPU、内存、磁盘各需要多少。OpenStack 将这些需求定义在 flavor 中，用户只需要指定用哪个 flavor 就可以了。</span></span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><img src="nova_files/Image [2].png" type="image/png" data-filename="Image.png" style="font-size: 12pt;" width="642"/></div><div><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: -apple-system-font; line-height: 1.6;-evernote-webclip:true;">可用的 flavor 在 System-&gt;Flavors 中管理。</span></div><div><img src="nova_files/Image [3].png" type="image/png" data-filename="Image.png" width="642"/></div><div><br/></div><div><span style="color: rgb(51, 51, 51); font-family: -apple-system-font; font-size: 12pt; line-height: 1.6;">下面介绍 nova-scheduler 是如何实现调度的。在 /etc/nova/nova.conf 中，nova 通过 d</span><span style="color: rgb(51, 51, 51); font-family: -apple-system-font; font-size: 12pt; line-height: 1.6;">river=filter_scheduler 这</span><span style="color: rgb(51, 51, 51); font-family: -apple-system-font; font-size: 12pt; line-height: 1.6;">个参数来配置 nova-scheduler。</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="border-width: 0px; border-style: initial; border-color: initial; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;"><span style="font-family: -apple-system-font;">driver=filter_scheduler</span></span></div></div><div><br/></div><div><span style="border-width: 0px; border-style: initial; border-color: initial; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system-font; line-height: 1.6; font-size: 12pt;">Filter scheduler</span></span></div><div><span style="color: rgb(51, 51, 51); font-family: -apple-system-font; font-size: 12pt;">Filter scheduler 是 nova-scheduler 默认的调度器，调度过程分为两步：</span></div><div><span style="color: rgb(51, 51, 51); font-family: -apple-system-font; font-size: 12pt;">1. 通过过滤器（filter）选择满足条件的计算节点（运行 nova-compute）</span></div><div><span style="color: rgb(51, 51, 51); font-family: -apple-system-font; font-size: 12pt;">2. 通过权重计算（weighting）选择在最优（权重值最大）的计算节点上创建 Instance。</span></div><div><br/></div><div><span style="color: rgb(51, 51, 51); font-family: -apple-system-font; font-size: 12pt;">Nova 允许使用第三方 scheduler，配置 scheduler_driver 即可。 这又一次体现了OpenStack的开放性。Scheduler 可以使用多个 filter 依次进行过滤，过滤之后的节点再通过计算权重选出最适合的节点。</span></div><div style="font-size: 17px;"><span style="font-size: 17px; border-width: 0px; border-style: initial; border-color: initial; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;"><img src="nova_files/Image [4].png" type="image/png" data-filename="Image.png" style="font-family: -apple-system-font; font-size: 13pt; color: rgb(51, 51, 51);" width="642"/></span></div><div style="font-size: 17px;"></div><div><span style="border-width: 0px; border-style: initial; border-color: initial; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px;"><span style="color: rgb(51, 51, 51); font-family: -apple-system-font; line-height: 1.6; font-size: 12pt;">上图是调度过程的一个示例：</span></span></div><div><span style="color: rgb(51, 51, 51); font-family: -apple-system-font; font-size: 12pt;">1. 最开始有 6 个计算节点 Host1-Host6</span></div><div><span style="color: rgb(51, 51, 51); font-family: -apple-system-font; font-size: 12pt;">2. 通过多个 filter 层层过滤，Host2 和 Host4 没有通过，被刷掉了</span></div><div><span style="color: rgb(51, 51, 51); font-family: -apple-system-font; font-size: 12pt;">3. Host1，Host3，Host5，Host6 计算权重，结果 Host5 得分最高，最终入选</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(51, 51, 51); font-family: -apple-system-font;">当 Filter scheduler 需要执行调度操作时，会让 filter 对计算节点进行判断，filter 返回 True 或 False。</span><span style="font-size: 12pt; letter-spacing: 0.034em; color: rgb(51, 51, 51); font-family: -apple-system-font;">经过前面一堆 filter 的过滤，nova-scheduler 选出了能够部署 instance 的计算节点。</span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="color: rgb(51, 51, 51); font-family: -apple-system-font; font-size: 12pt;">如果有多个计算节点通过了过滤，那么最终选择哪个节点呢？</span></span></div><div><br/></div><div><span style="font-size: 12pt;"><span style="color: rgb(51, 51, 51); font-family: -apple-system-font; font-size: 12pt;">Scheduler 会对每个计算节点打分，得分最高的获胜。 打分的过程就是 weight，翻译过来就是计算权重值，那么 scheduler 是根据什么来计算权重值呢？<span style="color: rgb(51, 51, 51); font-family: -apple-system-font; font-size: 12pt;"> </span></span></span></div><div><br/></div><div><span style="font-size: 12pt; letter-spacing: 0.034em; color: rgb(51, 51, 51); font-family: -apple-system-font;">目前 nova-scheduler 的默认实现是根据计算节点空闲的内存量计算权重值： 空闲内存越多，权重越大，instance 将被部署到当前空闲内存最多的计算节点上。</span></div><div style="font-size: 17px;"><br/></div><div style="font-size: 17px;"><br/></div><div style="font-size: 17px;"><span style="font-size: 17px; border-width: 0px; border-style: initial; border-color: initial; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">b）nova-compute：</span></div><div style="font-size: 17px;"><span style="font-size: 17px;"><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font; line-height: 1.6;">nova-compute 是管理虚机的核心服务，在计算节点上运行。通过调用Hypervisor API实现节点上的 instance的生命周期管理。 OpenStack 对 instance 的操作，最后都是交给 nova-compute 来完成的。 nova-compute 与 Hypervisor 一起实现 OpenStack 对 instance 生命周期的管理。</span></span></div><div style="font-size: 17px;"></div></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">通过Driver架构支持多种Hypervisor</span></div><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">Hypervisor是计算节点上跑的虚拟化管理程序，虚机管理最底层的程序。 不同虚拟化技术提供自己的 Hypervisor。 常用的 Hypervisor 有 KVM，Xen， VMWare 等。<span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font; line-height: 1.6;">nova-compute 为这些 Hypervisor 定义了统一的接口，Hypervisor 只需要实现这些接口，就可以 Driver 的形式即插即用到 OpenStack 系统中。 下面是Nova Driver的架构示意图：</span></span></div></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px;"><img src="nova_files/Image [5].png" type="image/png" data-filename="Image.png" style="font-family: -apple-system-font;" width="458"/></span></div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 17px; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">c）nova-conductor：</span></div><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">nova-compute 经常需要更新数据库，比如更新和获取虚机的状态。 出于安全性和伸缩性的考虑，nova-compute 并不会直接访问数据库，而是将这个任务委托给 nova-conductor。</span></div><div><span style="font-size: 17px;"><img src="nova_files/Image [6].png" type="image/png" data-filename="Image.png" style="font-size: 13pt;" width="363"/></span></div><div><span style="font-size: 13pt;">这样做有两个显著好处：</span></div><div><span style="font-size: 13pt;">1. 更高的系统安全性</span></div><div><span style="font-size: 13pt;">2. 更好的系统伸缩性</span></div><div><br/></div><div><br/></div></div><div style="font-size: 17px; margin: 5px 0px 0px; padding: 10px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; border-style: none none none solid; border-color: rgb(0, 88, 156); box-shadow: rgb(153, 153, 153) 1px 1px 2px; border-left-width: 10px; background-color: rgb(243, 243, 243);"><span style="font-size: 17px; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; color: rgb(153, 153, 153); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 25px;">Console Interface</span></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><span style="font-size: 17px; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">nova-console： </span><span style="letter-spacing: 0.034em; font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">用户可以通过多种方式访问虚机的控制台：</span></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">nova-novncproxy： 基于 Web 浏览器的 VNC 访问</span></div><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">nova-spicehtml5proxy： 基于 HTML5 浏览器的 SPICE 访问</span></div><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">nova-xvpnvncproxy： 基于 Java 客户端的 VNC 访问</span></div></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="letter-spacing: 0.034em; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">nova-consoleauth： </span><span style="letter-spacing: 0.034em; font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">负责对访问虚机控制台请求提供 Token 认证</span></div></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">nova-cert： </span><span style="letter-spacing: 0.034em; font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif;">提供 x509 证书支持</span></div><div><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div></div><div style="font-size: 17px; margin: 5px 0px 0px; padding: 10px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; border-style: none none none solid; border-color: rgb(0, 88, 156); box-shadow: rgb(153, 153, 153) 1px 1px 2px; border-left-width: 10px; background-color: rgb(243, 243, 243);"><span style="font-size: 17px; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; color: rgb(153, 153, 153); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 25px;">Database</span></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">Nova 会有一些数据需要存放到数据库中，一般使用 MySQL。数据库安装在控制节点上。 Nova 使用命名为 “nova” 的数据库。</span></div><div><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px;"><img src="nova_files/Image [7].png" type="image/png" data-filename="Image.png" style="font-family: -apple-system-font; font-size: 13pt; color: rgb(51, 51, 51);" width="642"/></span></div><div><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div></div><div style="font-size: 17px; margin: 5px 0px 0px; padding: 10px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; border-style: none none none solid; border-color: rgb(0, 88, 156); box-shadow: rgb(153, 153, 153) 1px 1px 2px; border-left-width: 10px; background-color: rgb(243, 243, 243);"><span style="font-size: 17px; box-sizing: border-box; margin: 0px; max-width: 100%; overflow-wrap: break-word; padding: 0px; color: rgb(153, 153, 153); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 25px;">Message Queue</span></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">在前面我们了解到 Nova 包含众多的子服务，这些子服务之间需要相互协调和通信。为解耦各个子服务，Nova 通过 Message Queue 作为子服务的信息中转站。 所以在架构图上我们看到了子服务之间没有直接的连线，是通过 Message Queue 联系的。</span></div><div><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;"><img src="nova_files/640.png" type="image/png" data-filename="640.png" style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;height:auto !important;width:171px !important;visibility:visible !important;" title="http://7xo6kd.com1.z0.glb.clouddn.com/upload-ueditor-image-20160419-1461074312658018704.png" width="171"/></span></div><div style="font-size: 17px; margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><br style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"/></div><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">OpenStack 默认是用 RabbitMQ 作为 Message Queue。 MQ 是 OpenStack 的核心基础组件，我们后面也会详细介绍。</span></div><div><br/></div><div><br/></div><div><span style="font-size: 14pt; color: rgb(54, 101, 238); font-family: -apple-system-font;">二、Nova 组件如何协同工作</span></div><div><br/></div><div><span style="max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; border-style: none none none solid; border-color: rgb(0, 88, 156); box-shadow: rgb(153, 153, 153) 1px 1px 2px; border-left-width: 10px; background-color: rgb(243, 243, 243); font-size: 17px; color: rgb(153, 153, 153); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 25px;">Nova 物理部署方案                                                                                       </span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><br/></div><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">       前面大家已经看到 Nova 由很多子服务组成，我们也知道 OpenStack 是一个分布式系统，可以部署到若干节点上，那么接下来大家可能就会问：Nova 的这些服务在物理上应该如何部署呢？</span></div><div><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13pt;"/></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">对于 Nova，这些服务会部署在两类节点上：计算节点和控制节点。</span></div><div><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13pt;"/></div><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">计算节点上安装了 Hypervisor，上面运行虚拟机。 由此可知：</span></div><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">1. 只有 nova-compute 需要放在计算节点上。</span></div><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">2. 其他子服务则是放在控制节点上的。</span></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13pt;"/></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><span style="clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">下面我们可以看看实验环境的具体部署情况。 通过在计算节点和控制节点上运行</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><span style="clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">ps -elf | grep nova 来查看运行的 nova 子服务</span></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px; box-sizing: border-box; max-width: 100%; overflow-wrap: break-word; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">计算节点compute只运行了nova-compute子服务</span></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px;"><img src="nova_files/640 [1].png" type="image/png" data-filename="640.png" style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; height: auto !important; white-space: normal; float: none; width: 338px !important; visibility: visible !important; font-size: 13pt;" width="338"/></span></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><br/></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px; box-sizing: border-box; max-width: 100%; overflow-wrap: break-word; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">控制节点controller运行了若干nova-*子服务</span></div><div><span style="font-size: 17px;"><img src="nova_files/640 [2].png" type="image/png" data-filename="640.png" style="letter-spacing: 0.034em; padding: 0px; box-sizing: border-box; overflow-wrap: break-word; float: none; font-size: 13pt; height: auto !important; width: 359px !important; visibility: visible !important;" width="359"/></span></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><br/></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">RabbitMQ 和 MySQL 也是放在控制节点上的。可能细心的同学已经发现我们的控制节点上也运行了 nova-compute。 这实际上也就意味着 devstack-controller 既是一个控制节点，同时也是一个计算节点，也可以在上面运行虚机。</span></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px;"><img src="nova_files/Image [8].png" type="image/png" data-filename="Image.png" style="font-family: -apple-system-font;" width="642"/></span></div><div><span style="font-size: 17px;"><img src="nova_files/Image [9].png" type="image/png" data-filename="Image.png" style="font-family: -apple-system-font;" width="642"/></span></div><div><br/></div><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">这也向我们展示了 OpenStack 这种分布式架构部署上的灵活性： 可以将所有服务都放在一台物理机上，作为一个 All-in-One 的测试环境； 也可以将服务部署在多台物理机上，获得更好的性能和高可用。</span></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13pt;"/></div><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">另外，也可以用 nova service-list 查看 nova-* 子服务都分布在哪些节点上</span></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px;"><img src="nova_files/Image [10].png" type="image/png" data-filename="Image.png" style="font-family: -apple-system-font;" width="597"/></span></div><div><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13pt;"/></div><div><br/></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; border-style: none none none solid; border-color: rgb(0, 88, 156); box-shadow: rgb(153, 153, 153) 1px 1px 2px; border-left-width: 10px; background-color: rgb(243, 243, 243); font-size: 17px; color: rgb(153, 153, 153); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 25px;-evernote-webclip:true;">从虚机创建流程看 nova-* 子服务如何协同工作                                    </span></div><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">      </span></div><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">     从学习 Nova 的角度看，虚机创建是一个非常好的场景，涉及的 nova-* 子服务很全，下面是流程图。</span></div></div><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px;"><img src="nova_files/640 [3].png" type="image/png" data-filename="640.png" style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; height: auto !important; white-space: normal; float: none; width: 554px !important; visibility: visible !important; font-size: 13pt;" width="554"/></span></div><div><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13pt;"/></div></div><ol style="margin: 0px; padding: 0px; padding-left: 2.2em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">客户（可以是 OpenStack 最终用户，也可以是其他程序）向 API（nova-api）发送请求：“帮我创建一个虚机”</span></div><div><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13pt;"/></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">API 对请求做一些必要处理后，向 Messaging（RabbitMQ）发送了一条消息：“让 Scheduler 创建一个虚机”</span></div><div><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13pt;"/></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">Scheduler（nova-scheduler）从 Messaging 获取到 API 发给它的消息，然后执行调度算法，从若干计算节点中选出节点 A</span></div><div><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13pt;"/></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">Scheduler 向 Messaging 发送了一条消息：“在计算节点 A 上创建这个虚机”</span></div><div><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13pt;"/></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">计算节点 A 的 Compute（nova-compute）从 Messaging 中获取到 Scheduler 发给它的消息，然后在本节点的 Hypervisor 上启动虚机。</span></div><div><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13pt;"/></div></div></li><li style="margin:0px;padding:0px;max-width:100%;box-sizing:border-box;overflow-wrap:break-word;"><div style="margin: 0px; padding: 0px; clear: both; min-height: 1em; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word;"><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">在虚机创建的过程中，Compute 如果需要查询或更新数据库信息，会通过 Messaging 向 Conductor（nova-conductor）发送消息，Conductor 负责数据库访问。</span></div><div><br style="margin: 0px; padding: 0px; max-width: 100%; box-sizing: border-box; overflow-wrap: break-word; font-size: 13pt;"/></div></div></li></ol><div><span style="font-size: 17px; color: rgb(51, 51, 51); font-family: -apple-system-font, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; line-height: 1.6;">以上是创建虚机最核心的步骤， 这几个步骤向我们展示了 nova-* 子服务之间的协作的方式，也体现了 OpenStack 整个系统的分布式设计思想，掌握这种思想对我们深入理解 OpenStack 会非常有帮助。</span></div><div><br/></div></div></div></div></div></div></div><div><br/></div><div><br/></div><div><br/></div><div><span style="color: rgb(54, 101, 238); font-family: 微软雅黑; font-size: 18.6667px; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: bold; letter-spacing: 0.442px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">三、nova配置文件：</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[DEFAULT]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">my_ip=172.16.254.63</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">use_neutron = True</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">firewall_driver = nova.virt.firewall.NoopFirewallDriver</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">enabled_apis=osapi_compute,metadata</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">transport_url =</span> <a href="rabbit://openstack:admin@controller/" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">rabbit://openstack:admin@controller</a></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[api]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">auth_strategy = keystone</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[api_database]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">connection = mysql+</span><a href="pymysql://nova:NOVA_DBPASS@controller/nova_api" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">pymysql://nova:NOVA_DBPASS@controller/nova_api</a></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[barbican]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt;">[cache]</span><br/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[cells]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[cinder]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">os_region_name = RegionOne</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[cloudpipe]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[conductor]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[console]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[consoleauth]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[cors]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[cors.subdomain]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[crypto]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[database]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">connection = mysql+</span><a href="pymysql://nova:NOVA_DBPASS@controller/nova" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">pymysql://nova:NOVA_DBPASS@controller/nova</a></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[ephemeral_storage_encryption]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[filter_scheduler]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[glance]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">api_servers =</span> <a href="http://controller:9292/" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">http://controller:9292</a></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[guestfs]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[healthcheck]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[hyperv]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[image_file_url]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[ironic]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[key_manager]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[keystone_authtoken]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">auth_uri =</span> <a href="http://controller:5000/" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">http://controller:5000</a></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">auth_url =</span> <a href="http://controller:35357/" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">http://controller:35357</a></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">memcached_servers = controller:11211</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">auth_type = password</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">project_domain_name = default</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">user_domain_name = default</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">project_name = service</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">username = nova</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">password = nova</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[libvirt]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">virt_type=qemu</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[matchmaker_redis]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[metrics]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[mks]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[neutron]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">url =</span> <a href="http://controller:9696/" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">http://controller:9696</a></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">auth_url =</span> <a href="http://controller:35357/" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">http://controller:35357</a></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">auth_type = password</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">project_domain_name = default</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">user_domain_name = default</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">region_name = RegionOne</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">project_name = service</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">username = neutron</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">password = neutron</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">service_metadata_proxy = true</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">metadata_proxy_shared_secret = METADATA_SECRET</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[notifications]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[osapi_v21]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[oslo_concurrency]</span></div><div><span style="font-family: Monaco; font-size: 9pt;">lock_path=/var/lib/nova/tmp</span><br/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[oslo_messaging_amqp]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[oslo_messaging_kafka]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[oslo_messaging_notifications]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[oslo_messaging_rabbit]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[oslo_messaging_zmq]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[oslo_middleware]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[oslo_policy]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[pci]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[placement]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">os_region_name = RegionOne</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">auth_type = password</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">auth_url =</span> <a href="http://controller:35357/v3" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">http://controller:35357/v3</a></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">project_name = service</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">project_domain_name = Default</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">username = placement</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">password = placement</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">user_domain_name = Default</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[quota]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[rdp]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[remote_debug]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[scheduler]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[serial_console]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[service_user]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[spice]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[ssl]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[trusted_computing]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[upgrade_levels]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[vendordata_dynamic_auth]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[vmware]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[vnc]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">enabled=true</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">vncserver_listen=$my_ip</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">vncserver_proxyclient_address=$my_ip</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">novncproxy_base_url =</span> <a href="http://172.16.254.63:6080/vnc_auto.html" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">http://172.16.254.63:6080/vnc_auto.html</a></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[workarounds]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[wsgi]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[xenserver]</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">[xvp]</span></div></div><div><br/></div></span>
</div></body></html> 